<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>第 1 章 登陆相关协议</title><link rel="stylesheet" type="text/css" href="docbook.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="3DK 通信协议说明文档" /><link rel="up" href="index.html" title="3DK 通信协议说明文档" /><link rel="prev" href="index.html" title="3DK 通信协议说明文档" /><link rel="next" href="ch01s02.html" title="1.2. 断线重连" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">第 1 章 登陆相关协议</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="index.html">上一页</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ch01s02.html">下一页</a></td></tr></table><hr /></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="idp59679776"></a>第 1 章 登陆相关协议</h1></div></div></div><div class="toc"><p><strong>目录</strong></p><dl class="toc"><dt><span class="section"><a href="ch01.html#idp59677056">1.1. 玩家登陆</a></span></dt><dt><span class="section"><a href="ch01s02.html">1.2. 断线重连</a></span></dt><dt><span class="section"><a href="ch01s03.html">1.3. 客户端在线告知</a></span></dt><dt><span class="section"><a href="ch01s04.html">1.4. 玩家注册</a></span></dt><dt><span class="section"><a href="ch01s05.html">1.5. 修改昵称</a></span></dt><dt><span class="section"><a href="ch01s06.html">1.6. 充值成功的同步消息</a></span></dt><dt><span class="section"><a href="ch01s07.html">1.7. 无效连接的通知消息</a></span></dt><dt><span class="section"><a href="ch01s08.html">1.8. 被GM踢下线的通知消息</a></span></dt><dt><span class="section"><a href="ch01s09.html">1.9. 完成新手引导步骤组</a></span></dt><dt><span class="section"><a href="ch01s10.html">1.10. 服务器停止倒计时的同步消息</a></span></dt><dt><span class="section"><a href="ch01s11.html">1.11. 心跳(客户端5分钟之内没有和服务器通信时调用)</a></span></dt><dt><span class="section"><a href="ch01s12.html">1.12. 使用兑换码</a></span></dt><dt><span class="section"><a href="ch01s13.html">1.13. 领取下载资源包的奖励</a></span></dt></dl></div><p>本章定义了所有登陆相关的通信协议格式。</p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp59677056"></a>1.1. 玩家登陆</h2></div></div></div><div class="informaltable"><table border="1"><colgroup><col class="1" /><col class="2" /><col class="3" /><col class="4" /><col class="5" /></colgroup><tbody><tr><td>协议名称</td><td colspan="4">玩家登陆</td></tr><tr><td>呼叫方</td><td>应答方</td><td>函数名</td><td>请求参数说明</td><td>返回值格式说明</td></tr><tr><td>客户端</td><td>网关服务器</td><td>login</td><td><div class="informaltable"><table border="1"><colgroup><col class="1" /><col class="2" /><col class="3" /></colgroup><tbody><tr><td>参数</td><td>类型</td><td>说明</td></tr><tr><td>login_type</td><td>string</td><td>设备类型。</td></tr><tr><td>platform_id</td><td>uint</td><td>合作方。1:tipcat, 2:PP助手。</td></tr><tr><td>accountname</td><td>String</td><td>来自运营平台</td></tr><tr><td>session_key</td><td>String</td><td>来自运营平台</td></tr><tr><td>version</td><td>String</td><td>客户端版本号</td></tr><tr><td>server_id</td><td>uint</td><td>来自OSS 游戏服务器ID</td></tr></tbody></table></div></td><td><div class="informaltable"><table border="1"><colgroup><col class="1" /><col class="2" /><col class="3" /></colgroup><tbody><tr><td>参数</td><td>类型</td><td>说明</td></tr><tr><td>result</td><td>uint</td><td>状态。
                                        0：获取成功。
                                        2：为第一次登陆，进入选择角色流程, 无其他参数。
                                        其它见<a class="link" href="ch29.html#errorlist" title="29.1. 错误代码列表">错误代码列表</a>.</td></tr><tr><td>data</td><td>Array(Object(char), server_time, httport, config_version, end_rescue_time)</td><td>角色信息，具体参数值如下：</td></tr><tr><td>char.cid</td><td>uint</td><td>角色ID</td></tr><tr><td>char.sid</td><td>uint</td><td>游戏服务器ID</td></tr><tr><td>char.nick_name</td><td>String</td><td>昵称</td></tr><tr><td>char.lead_id</td><td>uint</td><td>主角ID。</td></tr><tr><td>char.level</td><td>uint</td><td>主角等级。</td></tr><tr><td>char.exp</td><td>uint</td><td>主角当前经验值。</td></tr><tr><td>char.vip_level</td><td>uint</td><td>主角VIP等级。</td></tr><tr><td>char.might</td><td>uint</td><td>玩家战斗力。</td></tr><tr><td>char.golds</td><td>uint</td><td>玩家的金币数。</td></tr><tr><td>char.credits</td><td>uint</td><td>玩家的点卷数。</td></tr><tr><td>char.credits_payed</td><td>uint</td><td>玩家VIP当前等级已充值的点卷数。</td></tr><tr><td>char.firstpay</td><td>uint</td><td>玩家的首充标志位。0-未首充, 1-已首充。</td></tr><tr><td>char.monthly_card</td><td>uint</td><td>玩家的月卡剩余天数。</td></tr><tr><td>char.dual_monthly_card</td><td>uint</td><td>玩家的双月卡剩余天数。</td></tr><tr><td>char.growth_plan</td><td>uint</td><td>是否购买成长计划。0-未购买, 1-已购买。</td></tr><tr><td>char.register_time</td><td>uint</td><td>玩家第一次登陆时间。</td></tr><tr><td>char.session</td><td>String</td><td>登录session，用以断线重连。</td></tr><tr><td>char.soul</td><td>uint</td><td>玩家的仙魂。</td></tr><tr><td>char.hunyu</td><td>uint</td><td>玩家的魂玉。</td></tr><tr><td>char.prestige</td><td>uint</td><td>玩家的声望。</td></tr><tr><td>char.honor</td><td>uint</td><td>玩家的荣誉。</td></tr><tr><td>char.chaos_level</td><td>uint</td><td>玩家的混沌等级。</td></tr><tr><td>char.scene_star</td><td>uint</td><td>玩家打副本积累的星星数量。</td></tr><tr><td>char.end_cd_time</td><td>uint</td><td>玩家副本连战的冷却结束时间。</td></tr><tr><td>char.douzhan</td><td>uint</td><td>玩家的斗战值。</td></tr><tr><td>char.tutorial_steps</td><td>Array(tid, tid...)</td><td>玩家已完成的引导步骤组ID列表。</td></tr><tr><td>char.charge_ids</td><td>Array(charge_id, ...)</td><td>玩家已首充的充值档位ID列表。</td></tr><tr><td>server_time</td><td>uint</td><td>服务器当前时间。</td></tr><tr><td>httport</td><td>uint</td><td>sysconfig和keyword的服务器地址端口。</td></tr><tr><td>config_version</td><td>Array(sysconfig_ver, keyword_ver, banchat_ver, banname_ver)</td><td>sysconfig_ver/keyword_ver为配置/多语言/聊天屏蔽字/昵称屏蔽字的版本编号。</td></tr><tr><td>end_rescue_time</td><td>timestamp</td><td>解封天神的结束时间点。-1:已领取二郎神君, 0:未解封, &gt;0:未领取</td></tr></tbody></table></div></td></tr><tr><td>协议说明</td><td colspan="4"> </td></tr></tbody></table></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="index.html">上一页</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ch01s02.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">3DK 通信协议说明文档 </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td><td width="40%" align="right" valign="top"> 1.2. 断线重连</td></tr></table></div></body></html>