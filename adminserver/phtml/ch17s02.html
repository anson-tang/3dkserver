<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>17.2. 获取邮件列表</title><link rel="stylesheet" type="text/css" href="docbook.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="3DK 通信协议说明文档" /><link rel="up" href="ch17.html" title="第 17 章 邮件相关协议" /><link rel="prev" href="ch17.html" title="第 17 章 邮件相关协议" /><link rel="next" href="ch17s03.html" title="17.3. 处理好友请求邮件" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">17.2. 获取邮件列表</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch17.html">上一页</a> </td><th width="60%" align="center">第 17 章 邮件相关协议</th><td width="20%" align="right"> <a accesskey="n" href="ch17s03.html">下一页</a></td></tr></table><hr /></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp78774688"></a>17.2. 获取邮件列表</h2></div></div></div><p>
			</p><div class="informaltable"><table border="1"><colgroup><col class="1" /><col class="2" /><col class="3" /><col class="4" /><col class="5" /></colgroup><tbody><tr><td>协议名称</td><td colspan="4">根据不同类型获取邮件列表, 每次最多加载10条</td></tr><tr><td>呼叫方</td><td>应答方</td><td>函数名</td><td>请求参数说明</td><td>返回值格式说明</td></tr><tr><td>客户端</td><td>网关服务器</td><td>mail_list</td><td>
								<div class="informaltable"><table border="1"><colgroup><col class="1" /><col class="2" /><col class="3" /></colgroup><tbody><tr><td>参数</td><td>类型</td><td>说明</td></tr><tr><td>type</td><td>uint.</td><td>页签分类。1:全部; 2:好友; 3:系统; 4:战斗</td></tr><tr><td>index</td><td>uint.</td><td>邮件列表的起始下标, 从0开始</td></tr></tbody></table></div>
							</td><td>
								<div class="informaltable"><table border="1"><colgroup><col class="1" /><col class="2" /><col class="3" /></colgroup><tbody><tr><td>参数</td><td>类型</td><td>说明</td></tr><tr><td>result</td><td>uint</td><td>状态。0：获取成功。其它见<a class="link" href="ch29.html#errorlist" title="29.1. 错误代码列表">错误代码列表</a>.</td></tr><tr><td>mail_list</td><td>Array(type, cur_index, total, Array(mail, mail))</td><td>邮件列表详情。</td></tr><tr><td>type</td><td>uint.</td><td>页签分类。1:全部; 2:好友; 3:系统; 4:战斗</td></tr><tr><td>cur_index</td><td>uint.</td><td>邮件列表的起始下标。</td></tr><tr><td>total</td><td>uint.</td><td>相应页签所包含的邮件总数。</td></tr><tr><td>mail</td><td>Array(mail_id, send_time, mail_type, mail_module_id, detail)</td><td>邮件列表详情。</td></tr><tr><td>mail_id</td><td>unit.</td><td>邮件ID。唯一标识一封邮件。</td></tr><tr><td>send_time</td><td>timestamp.</td><td>收到邮件的时间戳。</td></tr><tr><td>mail_type</td><td>uint.</td><td>邮件类型说明。2:好友; 3:系统; 4:战斗</td></tr><tr><td>mail_module_id</td><td>uint.</td><td>邮件模板ID。详见设计文档。</td></tr><tr><td>detail</td><td>Array.</td><td><div class="literallayout"><p>不同邮件类型模板所含的详细数据。<br />
module_id=2001、2003、2101, 2302, 2303, 2305, 2306时, detail=Array(lead_id, nick_name); lead_id.Int.角色ID,客户端用于颜色显示<br />
module_id=2002时, detail=Array(lead_id, nick_name, rank); rank.Int.竞技场排名<br />
module_id=2102时, detail=Array(lead_id, nick_name, score); score.Int.武林大会失去的积分<br />
module_id=2201、2202时, detail=Array(lead_id, nick_name, shard_id); shard_id.Int.宝物碎片ID<br />
module_id=2301时, detail=Array(cid, lead_id, nick_name, status, content); cid.Int.发送请求的玩家ID. status.Int.申请状态,1-未处理,2-已同意,3-已拒绝 content.string.好友申请发来的附言<br />
module_id=2304时, detail=Array(cid, lead_id, nick_name, content); 好友留言 cid.Int.好友的CID<br />
module_id=2401时, detail=Array(reward_time, rank, Array(Array(item_type, item_id, item_num), ...)); reward_time.timestamp.决斗场奖励时间; rank.Int.名次;<br />
module_id=2402时, detail=Array(rank, Array(Array(item_type, item_id, item_num), ...)); rank.Int.武林大会中的名次; <br />
module_id=2501, 2502, 2503, 2504时, detail=Array(alliance_name);<br />
                                                </p></div></td></tr></tbody></table></div>
							</td></tr><tr><td>协议说明</td><td colspan="4"> </td></tr></tbody></table></div><p>
		</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch17.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="ch17.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="ch17s03.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">第 17 章 邮件相关协议 </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td><td width="40%" align="right" valign="top"> 17.3. 处理好友请求邮件</td></tr></table></div></body></html>