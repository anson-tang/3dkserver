<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>3.3. 抽卡</title><link rel="stylesheet" type="text/css" href="docbook.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="3DK 通信协议说明文档" /><link rel="up" href="ch03.html" title="第 3 章 商店相关协议" /><link rel="prev" href="ch03s02.html" title="3.2. [new] 获取抽卡状态信息" /><link rel="next" href="ch03s04.html" title="3.4. 阵营抽卡" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">3.3. 抽卡</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch03s02.html">上一页</a> </td><th width="60%" align="center">第 3 章 商店相关协议</th><td width="20%" align="right"> <a accesskey="n" href="ch03s04.html">下一页</a></td></tr></table><hr /></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp72894672"></a>3.3. 抽卡</h2></div></div></div><div class="informaltable"><table border="1"><colgroup><col class="1" /><col class="2" /><col class="3" /><col class="4" /><col class="5" /></colgroup><tbody><tr><td>协议名称</td><td colspan="4">抽卡</td></tr><tr><td>呼叫方</td><td>应答方</td><td>函数名</td><td>请求参数说明</td><td>返回值格式说明</td></tr><tr><td>客户端</td><td>网关服务器</td><td>randcard</td><td><div class="informaltable"><table border="1"><colgroup><col class="1" /><col class="2" /><col class="3" /></colgroup><tbody><tr><td>参数</td><td>类型</td><td>说明</td></tr><tr><td>card_type</td><td>uint</td><td>1:绿色，2：蓝色，3：紫色</td></tr><tr><td>rand_times</td><td>uint</td><td>1:只抽一次， 10：连抽10次。</td></tr></tbody></table></div></td><td><div class="informaltable"><table border="1"><colgroup><col class="1" /><col class="2" /><col class="3" /></colgroup><tbody><tr><td>参数</td><td>类型</td><td>说明</td></tr><tr><td>result</td><td>uint</td><td>状态。
                                        0：获取成功。其它见<a class="link" href="ch29.html#errorlist" title="29.1. 错误代码列表">错误代码列表</a>.</td></tr><tr><td>data</td><td>Array(credits, fellow_id_list, blue_left_time, purple_left_time, purple_rand_count, item_num, left_items)</td><td>玩家剩余点卷数和抽到的伙伴ID列表。具体参数解释如下：</td></tr><tr><td>credits</td><td>uint</td><td>玩家剩余的点卷数。</td></tr><tr><td>fellow_id_list</td><td>Array(Array(user_fellow_id, fellow_id), ...)</td><td>user_fellow_id: 玩家伙伴ID，内部唯一，查询或删除时用。fellow_id, uint, 伙伴ID. 具体属性见sysconfig['fellow']。</td></tr><tr><td>blue_left_time</td><td>int</td><td>-1表示没有抽过奖，0表示免费时间已到， &gt;0表示剩余秒数后，才能免费抽取。</td></tr><tr><td>purple_left_time</td><td>int</td><td>-1表示没有抽过奖，0表示免费时间已到， &gt;0表示剩余秒数后，才能免费抽取。</td></tr><tr><td>purple_rand_count</td><td>int</td><td>玩家在当前神坛等级中已抽取紫卡的次数。</td></tr><tr><td>item_num</td><td>int</td><td>玩家拥有的招募令道具数量。</td></tr><tr><td>left_items</td><td>Array(Array(user_item_id, item_type, item_id, quatity), ...)</td><td>抽卡后玩家的道具信息。</td></tr><tr><td>user_item_id</td><td>uint</td><td>玩家道具ID。</td></tr><tr><td>item_type</td><td>uint</td><td>道具类型。</td></tr><tr><td>item_id</td><td>uint</td><td>道具ID。</td></tr><tr><td>quantity</td><td>uint</td><td>道具剩余的数量。为0时需要client从背包中删除此道具</td></tr></tbody></table></div></td></tr><tr><td>协议说明</td><td colspan="4"> </td></tr></tbody></table></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch03s02.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="ch03.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="ch03s04.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">3.2. [new] 获取抽卡状态信息 </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td><td width="40%" align="right" valign="top"> 3.4. 阵营抽卡</td></tr></table></div></body></html>