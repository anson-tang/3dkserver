<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>第 22 章 魔主回来了相关协议</title><link rel="stylesheet" type="text/css" href="docbook.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="3DK 通信协议说明文档" /><link rel="up" href="index.html" title="3DK 通信协议说明文档" /><link rel="prev" href="ch21s03.html" title="21.3. 好感度等级互换" /><link rel="next" href="ch22s02.html" title="22.2. 进入魔主回来了活动页面" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">第 22 章 魔主回来了相关协议</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch21s03.html">上一页</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ch22s02.html">下一页</a></td></tr></table><hr /></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="idp79852624"></a>第 22 章 魔主回来了相关协议</h1></div></div></div><div class="toc"><p><strong>目录</strong></p><dl class="toc"><dt><span class="section"><a href="ch22.html#idp79853568">22.1. 获取魔主回来了活动当前状态信息</a></span></dt><dt><span class="section"><a href="ch22s02.html">22.2. 进入魔主回来了活动页面</a></span></dt><dt><span class="section"><a href="ch22s03.html">22.3. 离开魔主回来了活动页面</a></span></dt><dt><span class="section"><a href="ch22s04.html">22.4. 魔主当前伤害数据广播</a></span></dt><dt><span class="section"><a href="ch22s05.html">22.5. 魔主死亡活动结算同步</a></span></dt><dt><span class="section"><a href="ch22s06.html">22.6. 攻击魔主</a></span></dt><dt><span class="section"><a href="ch22s07.html">22.7. 复活(清除攻击CD)</a></span></dt><dt><span class="section"><a href="ch22s08.html">22.8. 鼓舞</a></span></dt><dt><span class="section"><a href="ch22s09.html">22.9. 伤害排行前十名</a></span></dt></dl></div><p>本章定义了所有魔主来了相关的通信协议格式。</p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp79853568"></a>22.1. 获取魔主回来了活动当前状态信息</h2></div></div></div><p>
			</p><div class="informaltable"><table border="1"><colgroup><col class="1" /><col class="2" /><col class="3" /><col class="4" /><col class="5" /></colgroup><tbody><tr><td>协议名称</td><td colspan="4">返回魔主回来了活动当前状态信息。</td></tr><tr><td>呼叫方</td><td>应答方</td><td>函数名</td><td>请求参数说明</td><td>返回值格式说明</td></tr><tr><td>客户端</td><td>网关服务器</td><td>worldboss_status</td><td>
								<div class="informaltable"><table border="1"><colgroup><col class="1" /><col class="2" /><col class="3" /></colgroup><tbody><tr><td>参数</td><td>类型</td><td>说明</td></tr></tbody></table></div>
							</td><td>
								<div class="informaltable"><table border="1"><colgroup><col class="1" /><col class="2" /><col class="3" /></colgroup><tbody><tr><td>参数</td><td>类型</td><td>说明</td></tr><tr><td>result</td><td>uint</td><td>状态。0：获取成功。其它见<a class="link" href="ch29.html#errorlist" title="29.1. 错误代码列表">错误代码列表</a>.</td></tr><tr><td>duration</td><td>Array(begin_time, end_time)</td><td>活动开启时段，begin_time:Array(hour,min,sec), 活动开启时间时分秒, end_time:Array(hour,min,sec), 活动关闭时间时分秒, 当日必然结束.</td></tr><tr><td>boss_level</td><td>uint.</td><td>本届魔主等级。</td></tr><tr><td>worldboss_info</td><td>Array(attacked_char_names_last, attacked_name_final_last)</td><td>本次活动的魔主等级，和上届活动的玩家数据。仅当前时间不在duration时间段内，本字段有值。</td></tr><tr><td>attacked_char_names_last</td><td>Array(string, string, string).</td><td>上届伤害前三名的玩家昵称。</td></tr><tr><td>attacked_name_final_last</td><td>string</td><td>上届最后击杀的玩家昵称。</td></tr><tr><td>current_status</td><td>Array(attack_count, attack_time, damage_total, damage_percent, gold_inspire_count, credit_inspire_count, clear_count, current_rank, damage_extra_per_level)</td><td>本届活动进行时，当前玩家的活动状态。当前时间不在duration时间段内，值为空</td></tr><tr><td>attack_count</td><td>uint</td><td>本届活动中，当前玩家已攻击次数。</td></tr><tr><td>attack_time</td><td>uint</td><td>本届活动中，当前玩家上次攻击时间，timestamp。</td></tr><tr><td>damage_total</td><td>uint</td><td>本届活动中，当前玩家总攻击伤害。</td></tr><tr><td>damage_percent</td><td>uint</td><td>本届活动中，当前玩家总攻击伤害占魔主已伤害的万分比。比如值为123， 伤害比例为： 0.00123%</td></tr><tr><td>gold_inspire_count</td><td>uint</td><td>本届活动中，当前玩家金币鼓舞等级，根据sysconfig可以得到下次鼓舞所需金币。和credit_inspire_count相加得到鼓舞加成等级</td></tr><tr><td>credit_inspire_count</td><td>uint</td><td>本届活动中，当前玩家钻石鼓舞等级，根据sysconfig可以得到下次鼓舞所需钻石。和gold_inspire_count相加得到鼓舞加成等级</td></tr><tr><td>clear_count</td><td>uint</td><td>本届活动中，当前玩家已复活(清除CD)次数。</td></tr><tr><td>current_rank</td><td>uint</td><td>本届活动中，当前玩家的排名。</td></tr><tr><td>damage_extra_per_level</td><td>uint</td><td>本届活动中，当前玩家的战斗额外基数，常量。</td></tr><tr><td>boss_life</td><td>uint</td><td>活动中，魔主当前的血量。当前时间不在duration时间段内，值为空。</td></tr></tbody></table></div>
							</td></tr><tr><td>协议说明</td><td colspan="4"> </td></tr></tbody></table></div><p>
		</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch21s03.html">上一页</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ch22s02.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">21.3. 好感度等级互换 </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td><td width="40%" align="right" valign="top"> 22.2. 进入魔主回来了活动页面</td></tr></table></div></body></html>