<chapter>
    <title>大乱斗相关协议</title>
    <para>本章定义了所有大乱斗相关的通信协议格式。</para>
    
    <section> 
        <title>获取玩家在大乱斗中的基本信息</title>
    	<para>
    		<informaltable>
    			<tgroup cols="5">
    				<colspec colnum="1" colname="1"/>
    				<colspec colnum="2" colname="2"/>
    				<colspec colnum="3" colname="3"/>
    				<colspec colnum="4" colname="4"/>
    				<colspec colnum="5" colname="5"/>
    				<tbody>
    					<row>
    						<entry>协议名称</entry>
    						<entry namest="2" nameend="5">返回玩家在大乱斗中的基本信息。</entry>
    					</row>
    					<row>
    						<entry>呼叫方</entry>
    						<entry>应答方</entry>
    						<entry>函数名</entry>
    						<entry>请求参数说明</entry>
    						<entry>返回值格式说明</entry>
    					</row>
    					<row>
    						<entry>客户端</entry>
    						<entry>网关服务器</entry>
    						<entry>get_joust_info</entry>
    						<entry>
    							<informaltable>
    								<tgroup cols="3">
    									<colspec colnum="1" colname="1"/>
    									<colspec colnum="2" colname="2"/>
    									<colspec colnum="3" colname="3"/>
    									<tbody>
    										<row>
    											<entry>参数</entry>
    											<entry>类型</entry>
    											<entry>说明</entry>
    										</row>
    									</tbody>
    								</tgroup>
    							</informaltable>
    						</entry>
    						<entry>
    							<informaltable>
    								<tgroup cols="3">
    									<colspec colnum="1" colname="1"/>
    									<colspec colnum="2" colname="2"/>
    									<colspec colnum="3" colname="3"/>
    									<tbody>
    										<row>
    											<entry>参数</entry>
    											<entry>类型</entry>
    											<entry>说明</entry>
    										</row>
    										<row>
    											<entry>result</entry>
    											<entry>uint</entry>
    											<entry>状态。0：获取成功。其它见<link linkend="errorlist">错误代码列表</link>.</entry>
    										</row>
                                            <row>
                                                <entry>data</entry>
                                                <entry>Array(rank, score, left_count, total_count, had_buy_count, joust_data, joust_status, joust_timestamp)</entry>
                                                <entry>玩家在大乱斗中的基本信息。</entry>
                                            </row>
                                            <row>
                                                <entry>rank</entry>
                                                <entry>uint。</entry>
                                                <entry>玩家在大乱斗中的排名。</entry>
                                            </row>
                                            <row>
                                                <entry>score</entry>
                                                <entry>uint.</entry>
                                                <entry>玩家在大乱斗中的积分。</entry>
                                            </row>
                                            <row>
                                                <entry>left_count</entry>
                                                <entry>uint.</entry>
                                                <entry>今日剩余可挑战次数, 含购买的次数。每日0点刷新。</entry>
                                            </row>
                                            <row>
                                                <entry>total_count</entry>
                                                <entry>uint.</entry>
                                                <entry>今日可免费挑战的最大次数。</entry>
                                            </row>
                                            <row>
                                                <entry>had_buy_count</entry>
                                                <entry>uint.</entry>
                                                <entry>今日已购买的挑战次数。每日0点刷新。</entry>
                                            </row>
                                            <row>
                                                <entry>joust_data</entry>
                                                <entry>Array(Array(cid, lead_id, level, nick_name, might, fellow_ids, alliance_info, socre), ...)</entry>
                                                <entry>大乱斗玩家的详情。长度为3。位置依次为上、左、右。</entry>
                                            </row>
                                            <row>
                                                <entry>cid</entry>
                                                <entry>uint.</entry>
                                                <entry>玩家或机器人的ID。注: 1-10000表示是机器人。</entry>
                                            </row>
                                            <row>
                                                <entry>lead_id</entry>
                                                <entry>uint.</entry>
                                                <entry>玩家的主角ID或0。注: 0表示是机器人。</entry>
                                            </row>
                                            <row>
                                                <entry>level</entry>
                                                <entry>uint.</entry>
                                                <entry>玩家或机器人的等级. 如果是机器人, level为多个怪物中任意一个怪物的等级。</entry>
                                            </row>
                                            <row>
                                                <entry>nick_name</entry>
                                                <entry>string.</entry>
                                                <entry>玩家或机器人的名字。</entry>
                                            </row>
                                            <row>
                                                <entry>might</entry>
                                                <entry>uint.</entry>
                                                <entry>玩家的战力值。</entry>
                                            </row>
                                            <row>
                                                <entry>fellow_ids</entry>
                                                <entry>Array(fellow_id, ...)</entry>
                                                <entry>玩家阵容中的伙伴ID列表, 为空。</entry>
                                            </row>
                                            <row>
                                                <entry>alliance_info</entry>
                                                <entry>Array(alliance_id, alliance_name).</entry>
                                                <entry>玩家的仙盟信息。alliance_id:仙盟ID, alliance_name:仙盟名称。注:机器人时该字段为空。</entry>
                                            </row>
                                            <row>
                                                <entry>score</entry>
                                                <entry>uint.</entry>
                                                <entry>玩家或机器人的积分。注:机器人的积分一直为1000。</entry>
                                            </row>
                                            <row>
                                                <entry>joust_status</entry>
                                                <entry>uint。</entry>
                                                <entry>活动状态。0-活动进行中, 1-非活动时间, 2-活动已结束。</entry>
                                            </row>
                                            <row>
                                                <entry>joust_timestamp</entry>
                                                <entry>timestamp。</entry>
                                                <entry>当joust_status=0时, 此值为活动结束的时间点。当joust_status=1,2时 此值无效。</entry>
                                            </row>
    									</tbody>
    								</tgroup>
    							</informaltable>
    						</entry>
    					</row>
    					<row>
    						<entry>协议说明</entry>
    						<entry namest="2" nameend="5"/>
    					</row>
    				</tbody>
    			</tgroup>
    		</informaltable>
    	</para>
    </section>

    <section>
        <title>刷新对手</title>
        <para>
            <informaltable>
            	<tgroup cols="5">
            		<colspec colnum="1" colname="1"/>
            		<colspec colnum="2" colname="2"/>
            		<colspec colnum="3" colname="3"/>
            		<colspec colnum="4" colname="4"/>
            		<colspec colnum="5" colname="5"/>
            		<tbody>
            			<row>
            				<entry>协议名称</entry>
            				<entry namest="2" nameend="5">刷新大乱斗中的对手</entry>
            			</row>
            			<row>
            				<entry>呼叫方</entry>
            				<entry>应答方</entry>
            				<entry>函数名</entry>
            				<entry>请求参数说明</entry>
            				<entry>返回值格式说明</entry>
            			</row>
            			<row>
            				<entry>客户端</entry>
            				<entry>网关服务器</entry>
            				<entry>refresh_joust_players</entry>
            				<entry>
            					<informaltable>
            						<tgroup cols="3">
            							<colspec colnum="1" colname="1"/>
            							<colspec colnum="2" colname="2"/>
            							<colspec colnum="3" colname="3"/>
            							<tbody>
            								<row>
            									<entry>参数</entry>
            									<entry>类型</entry>
            									<entry>说明</entry>
            								</row>
            							</tbody>
            						</tgroup>
            					</informaltable>
            				</entry>
            				<entry>
            					<informaltable>
            						<tgroup cols="3">
            							<colspec colnum="1" colname="1"/>
            							<colspec colnum="2" colname="2"/>
            							<colspec colnum="3" colname="3"/>
            							<tbody>
            								<row>
            									<entry>参数</entry>
            									<entry>类型</entry>
            									<entry>说明</entry>
            								</row>
            								<row>
            									<entry>result</entry>
            									<entry>uint</entry>
            									<entry>状态。0：获取成功。其它见<link linkend="errorlist">错误代码列表</link>.</entry>
            								</row>
                                            <row>
                                                <entry>data</entry>
                                                <entry>Array(Array(cid, lead_id, level, nick_name, might, fellow_ids, alliance_info, socre), ...)</entry>
                                                <entry>刷新大乱斗后的玩家详情。长度为3。位置依次为上、左、右。</entry>
                                            </row>
                                            <row>
                                                <entry>cid</entry>
                                                <entry>uint.</entry>
                                                <entry>玩家或机器人的ID。注: 1-10000表示是机器人。</entry>
                                            </row>
                                            <row>
                                                <entry>lead_id</entry>
                                                <entry>uint.</entry>
                                                <entry>玩家的主角ID或0。注: 0表示是机器人。</entry>
                                            </row>
                                            <row>
                                                <entry>level</entry>
                                                <entry>uint.</entry>
                                                <entry>玩家或机器人的等级. 如果是机器人, level为多个怪物中任意一个怪物的等级。</entry>
                                            </row>
                                            <row>
                                                <entry>nick_name</entry>
                                                <entry>string.</entry>
                                                <entry>玩家或机器人的名字。</entry>
                                            </row>
                                            <row>
                                                <entry>might</entry>
                                                <entry>uint.</entry>
                                                <entry>玩家的战力值。</entry>
                                            </row>
                                            <row>
                                                <entry>fellow_ids</entry>
                                                <entry>Array(fellow_id, ...)</entry>
                                                <entry>玩家阵容中的伙伴ID列表, 为空。</entry>
                                            </row>
                                            <row>
                                                <entry>alliance_info</entry>
                                                <entry>Array(alliance_id, alliance_name).</entry>
                                                <entry>玩家的仙盟信息。alliance_id:仙盟ID, alliance_name:仙盟名称。注:机器人时该字段为空。</entry>
                                            </row>
                                            <row>
                                                <entry>score</entry>
                                                <entry>uint.</entry>
                                                <entry>玩家或机器人的积分。注:机器人的积分一直为1000。</entry>
                                            </row>
            							</tbody>
            						</tgroup>
            					</informaltable>
            				</entry>
            			</row>
            			<row>
            				<entry>协议说明</entry>
            				<entry namest="2" nameend="5"/>
            			</row>
            		</tbody>
            	</tgroup>
            </informaltable>
        </para>
    </section>

    <section>
        <title>大乱斗战斗结束时请求更新</title>
        <para>
            <informaltable>
            	<tgroup cols="5">
            		<colspec colnum="1" colname="1"/>
            		<colspec colnum="2" colname="2"/>
            		<colspec colnum="3" colname="3"/>
            		<colspec colnum="4" colname="4"/>
            		<colspec colnum="5" colname="5"/>
            		<tbody>
            			<row>
            				<entry>协议名称</entry>
                            <entry namest="2" nameend="5">战斗结束后，更新玩家在大乱斗中的排名、积分、荣誉等信息</entry>
            			</row>
            			<row>
            				<entry>呼叫方</entry>
            				<entry>应答方</entry>
            				<entry>函数名</entry>
            				<entry>请求参数说明</entry>
            				<entry>返回值格式说明</entry>
            			</row>
            			<row>
            				<entry>客户端</entry>
            				<entry>网关服务器</entry>
            				<entry>sync_joust_battle</entry>
            				<entry>
            					<informaltable>
            						<tgroup cols="3">
            							<colspec colnum="1" colname="1"/>
            							<colspec colnum="2" colname="2"/>
            							<colspec colnum="3" colname="3"/>
            							<tbody>
            								<row>
            									<entry>参数</entry>
            									<entry>类型</entry>
            									<entry>说明</entry>
            								</row>
            								<row>
            									<entry>position</entry>
            									<entry>uint.</entry>
            									<entry>挑战前对手的位置。1-上, 2-左, 3-右。</entry>
            								</row>
            								<row>
            									<entry>battle_status</entry>
            									<entry>uint</entry>
            									<entry>挑战后的结果。0:战斗失败; 1:战斗胜利</entry>
            								</row>
            							</tbody>
            						</tgroup>
            					</informaltable>
            				</entry>
            				<entry>
            					<informaltable>
            						<tgroup cols="3">
            							<colspec colnum="1" colname="1"/>
            							<colspec colnum="2" colname="2"/>
            							<colspec colnum="3" colname="3"/>
            							<tbody>
            								<row>
            									<entry>参数</entry>
            									<entry>类型</entry>
            									<entry>说明</entry>
            								</row>
            								<row>
            									<entry>result</entry>
            									<entry>uint</entry>
            									<entry>状态。0：获取成功。其它见<link linkend="errorlist">错误代码列表</link>.</entry>
            								</row>
            								<row>
            									<entry>data</entry>
            									<entry>Array(rank, score, douzhan, left_count, lottery_items, joust_data, honor)</entry>
            									<entry>挑战结束后同步玩家的数据。</entry>
            								</row>
                                            <row>
                                                <entry>rank</entry>
                                                <entry>uint。</entry>
                                                <entry>玩家在大乱斗中的排名。</entry>
                                            </row>
                                            <row>
                                                <entry>score</entry>
                                                <entry>uint.</entry>
                                                <entry>玩家在大乱斗中的积分。</entry>
                                            </row>
            								<row>
            									<entry>douzhan</entry>
            									<entry>uint</entry>
            									<entry>玩家剩余的斗战点数。</entry>
            								</row>
                                            <row>
                                                <entry>left_count</entry>
                                                <entry>uint.</entry>
                                                <entry>今日剩余可挑战次数, 含购买的次数。每日0点刷新。</entry>
                                            </row>
                                            <row>
                                                <entry>lottery_items</entry>
                                                <entry>Array(Array(item_type, item_id, item_num, msg_notice), ...)</entry>
                                                <entry>挑战胜利后，可供翻牌的道具列表。长度为3。</entry>
                                            </row>
                                            <row>
                                                <entry>joust_data</entry>
                                                <entry>Array(Array(cid, lead_id, level, nick_name, might, fellow_ids, alliance_info, socre), ...)</entry>
                                                <entry><literallayout>当battle_status=0 战斗失败时,joust_data为空。 
当battle_status=1 战斗胜利时, 刷新大乱斗后的玩家详情。长度为3。位置依次为上、左、右。
</literallayout></entry>
                                            </row>
                                            <row>
                                                <entry>honor</entry>
                                                <entry>uint.</entry>
                                                <entry>玩家的荣誉值。</entry>
                                            </row>
            							</tbody>
            						</tgroup>
            					</informaltable>
            				</entry>
            			</row>
            			<row>
            				<entry>协议说明</entry>
            				<entry namest="2" nameend="5"/>
            			</row>
            		</tbody>
            	</tgroup>
            </informaltable>
        </para>
    </section>

    <section>
        <title>购买挑战次数</title>
        <para>
            <informaltable>
            	<tgroup cols="5">
            		<colspec colnum="1" colname="1"/>
            		<colspec colnum="2" colname="2"/>
            		<colspec colnum="3" colname="3"/>
            		<colspec colnum="4" colname="4"/>
            		<colspec colnum="5" colname="5"/>
            		<tbody>
            			<row>
            				<entry>协议名称</entry>
            				<entry namest="2" nameend="5">购买大乱斗中的挑战次数</entry>
            			</row>
            			<row>
            				<entry>呼叫方</entry>
            				<entry>应答方</entry>
            				<entry>函数名</entry>
            				<entry>请求参数说明</entry>
            				<entry>返回值格式说明</entry>
            			</row>
            			<row>
            				<entry>客户端</entry>
            				<entry>网关服务器</entry>
            				<entry>buy_joust_count</entry>
            				<entry>
            					<informaltable>
            						<tgroup cols="3">
            							<colspec colnum="1" colname="1"/>
            							<colspec colnum="2" colname="2"/>
            							<colspec colnum="3" colname="3"/>
            							<tbody>
            								<row>
            									<entry>参数</entry>
            									<entry>类型</entry>
            									<entry>说明</entry>
            								</row>
                                            <row>
                                                <entry>buy_count</entry>
                                                <entry>uint</entry>
                                                <entry>单次购买的挑战次数。</entry>
                                            </row>
            							</tbody>
            						</tgroup>
            					</informaltable>
            				</entry>
            				<entry>
            					<informaltable>
            						<tgroup cols="3">
            							<colspec colnum="1" colname="1"/>
            							<colspec colnum="2" colname="2"/>
            							<colspec colnum="3" colname="3"/>
            							<tbody>
            								<row>
            									<entry>参数</entry>
            									<entry>类型</entry>
            									<entry>说明</entry>
            								</row>
            								<row>
            									<entry>result</entry>
            									<entry>uint</entry>
            									<entry>状态。0：获取成功。其它见<link linkend="errorlist">错误代码列表</link>.</entry>
            								</row>
                                            <row>
                                                <entry>data</entry>
                                                <entry>Array(left_count, had_buy_count, credits)</entry>
                                                <entry>玩家购买挑战次数后的信息。</entry>
                                            </row>
                                            <row>
                                                <entry>left_count</entry>
                                                <entry>uint.</entry>
                                                <entry>今日剩余可挑战次数, 含购买的次数。每日0点刷新。</entry>
                                            </row>
                                            <row>
                                                <entry>had_buy_count</entry>
                                                <entry>uint.</entry>
                                                <entry>今日已购买的挑战次数。每日0点刷新。</entry>
                                            </row>
                                            <row>
                                                <entry>credits</entry>
                                                <entry>uint</entry>
                                                <entry>玩家剩余的钻石数。</entry>
                                            </row>
            							</tbody>
            						</tgroup>
            					</informaltable>
            				</entry>
            			</row>
            			<row>
            				<entry>协议说明</entry>
            				<entry namest="2" nameend="5"/>
            			</row>
            		</tbody>
            	</tgroup>
            </informaltable>
        </para>
    </section>

    <section>
        <title>获取大乱斗排行榜</title>
        <para>
            <informaltable>
                <tgroup cols="5">
                	<colspec colnum="1" colname="1"/>
                	<colspec colnum="2" colname="2"/>
                	<colspec colnum="3" colname="3"/>
                	<colspec colnum="4" colname="4"/>
                	<colspec colnum="5" colname="5"/>
                	<tbody>
                		<row>
                			<entry>协议名称</entry>
                			<entry namest="2" nameend="5">获取大乱斗排行榜, 最多10名玩家</entry>
                		</row>
                		<row>
                			<entry>呼叫方</entry>
                			<entry>应答方</entry>
                			<entry>函数名</entry>
                			<entry>请求参数说明</entry>
                			<entry>返回值格式说明</entry>
                		</row>
                		<row>
                			<entry>客户端</entry>
                			<entry>网关服务器</entry>
                			<entry>get_joust_ranklist</entry>
                			<entry>
                				<informaltable>
                					<tgroup cols="3">
                						<colspec colnum="1" colname="1"/>
                						<colspec colnum="2" colname="2"/>
                						<colspec colnum="3" colname="3"/>
                						<tbody>
                							<row>
                								<entry>参数</entry>
                								<entry>类型</entry>
                								<entry>说明</entry>
                							</row>
                						</tbody>
                					</tgroup>
                				</informaltable>
                			</entry>
                			<entry>
                				<informaltable>
                					<tgroup cols="3">
                						<colspec colnum="1" colname="1"/>
                						<colspec colnum="2" colname="2"/>
                						<colspec colnum="3" colname="3"/>
                						<tbody>
                							<row>
                								<entry>参数</entry>
                								<entry>类型</entry>
                								<entry>说明</entry>
                							</row>
                							<row>
                								<entry>result</entry>
                								<entry>uint</entry>
                								<entry>状态。0：获取成功。其它见<link linkend="errorlist">错误代码列表</link>.</entry>
                							</row>
                							<row>
                								<entry>data</entry>
                								<entry>Array(Array(cid, lead_id, level, nick_name, might, fellow_ids, alliance_info, socre, rank), ...)</entry>
                								<entry>大乱斗中的排行榜，长度最大为10，具体参数值如下：</entry>
                							</row>
                                            <row>
                                                <entry>cid</entry>
                                                <entry>uint.</entry>
                                                <entry>玩家的ID。</entry>
                                            </row>
                                            <row>
                                                <entry>lead_id</entry>
                                                <entry>uint.</entry>
                                                <entry>玩家的主角ID。</entry>
                                            </row>
                                            <row>
                                                <entry>level</entry>
                                                <entry>uint.</entry>
                                                <entry>玩家的等级。</entry>
                                            </row>
                                            <row>
                                                <entry>nick_name</entry>
                                                <entry>string.</entry>
                                                <entry>玩家的名字。</entry>
                                            </row>
                                            <row>
                                                <entry>might</entry>
                                                <entry>uint.</entry>
                                                <entry>玩家的战力值。</entry>
                                            </row>
                                            <row>
                                                <entry>fellow_ids</entry>
                                                <entry>Array(fellow_id, ...)</entry>
                                                <entry>玩家阵容中的伙伴ID列表, 为空。</entry>
                                            </row>
                                            <row>
                                                <entry>alliance_info</entry>
                                                <entry>Array(alliance_id, alliance_name).</entry>
                                                <entry>玩家的仙盟信息。alliance_id:仙盟ID, alliance_name:仙盟名称。</entry>
                                            </row>
                                            <row>
                                                <entry>score</entry>
                                                <entry>uint.</entry>
                                                <entry>玩家的积分。</entry>
                                            </row>
                                            <row>
                                                <entry>rank</entry>
                                                <entry>uint。</entry>
                                                <entry>玩家在大乱斗中的排名。</entry>
                                            </row>
                						</tbody>
                					</tgroup>
                				</informaltable>
                			</entry>
                		</row>
                		<row>
                			<entry>协议说明</entry>
                			<entry namest="2" nameend="5"/>
                		</row>
                	</tbody>
                </tgroup>
            </informaltable>
        </para>
    </section>

    <section>
        <title>获取仇敌列表</title>
        <para>
            <informaltable>
            	<tgroup cols="5">
            		<colspec colnum="1" colname="1"/>
            		<colspec colnum="2" colname="2"/>
            		<colspec colnum="3" colname="3"/>
            		<colspec colnum="4" colname="4"/>
            		<colspec colnum="5" colname="5"/>
            		<tbody>
            			<row>
            				<entry>协议名称</entry>
            				<entry namest="2" nameend="5">获取大乱斗中的仇敌。最多20个, 活动结束后重置。</entry>
            			</row>
            			<row>
            				<entry>呼叫方</entry>
            				<entry>应答方</entry>
            				<entry>函数名</entry>
            				<entry>请求参数说明</entry>
            				<entry>返回值格式说明</entry>
            			</row>
            			<row>
            				<entry>客户端</entry>
            				<entry>网关服务器</entry>
            				<entry>get_joust_enemy</entry>
            				<entry>
            					<informaltable>
            						<tgroup cols="3">
            							<colspec colnum="1" colname="1"/>
            							<colspec colnum="2" colname="2"/>
            							<colspec colnum="3" colname="3"/>
            							<tbody>
            								<row>
            									<entry>参数</entry>
            									<entry>类型</entry>
            									<entry>说明</entry>
            								</row>
            							</tbody>
            						</tgroup>
            					</informaltable>
            				</entry>
            				<entry>
            					<informaltable>
            						<tgroup cols="3">
            							<colspec colnum="1" colname="1"/>
            							<colspec colnum="2" colname="2"/>
            							<colspec colnum="3" colname="3"/>
            							<tbody>
            								<row>
            									<entry>参数</entry>
            									<entry>类型</entry>
            									<entry>说明</entry>
            								</row>
            								<row>
            									<entry>result</entry>
            									<entry>uint</entry>
            									<entry>状态。0：获取成功。其它见<link linkend="errorlist">错误代码列表</link>.</entry>
            								</row>
                                            <row>
                                                <entry>data</entry>
                                                <entry>Array(Array(cid, lead_id, level, nick_name, might, fellow_ids, alliance_info, socre), ...)</entry>
                                                <entry>玩家的仇敌列表。</entry>
                                            </row>
                                            <row>
                                                <entry>cid</entry>
                                                <entry>uint.</entry>
                                                <entry>仇敌的ID。</entry>
                                            </row>
                                            <row>
                                                <entry>lead_id</entry>
                                                <entry>uint.</entry>
                                                <entry>仇敌的主角ID。</entry>
                                            </row>
                                            <row>
                                                <entry>level</entry>
                                                <entry>uint.</entry>
                                                <entry>仇敌的等级。</entry>
                                            </row>
                                            <row>
                                                <entry>nick_name</entry>
                                                <entry>string.</entry>
                                                <entry>仇敌的名字。</entry>
                                            </row>
                                            <row>
                                                <entry>might</entry>
                                                <entry>uint.</entry>
                                                <entry>仇敌的战力值。</entry>
                                            </row>
                                            <row>
                                                <entry>fellow_ids</entry>
                                                <entry>Array(fellow_id, ...)</entry>
                                                <entry>仇敌阵容中的伙伴ID列表。</entry>
                                            </row>
                                            <row>
                                                <entry>alliance_info</entry>
                                                <entry>Array(alliance_id, alliance_name).</entry>
                                                <entry>仇敌的仙盟信息。alliance_id:仙盟ID, alliance_name:仙盟名称。注:没有仙盟时该字段为空。</entry>
                                            </row>
                                            <row>
                                                <entry>score</entry>
                                                <entry>uint.</entry>
                                                <entry>仇敌的积分。</entry>
                                            </row>
            							</tbody>
            						</tgroup>
            					</informaltable>
            				</entry>
            			</row>
            			<row>
            				<entry>协议说明</entry>
            				<entry namest="2" nameend="5"/>
            			</row>
            		</tbody>
            	</tgroup>
            </informaltable>
        </para>
    </section>

    <section>
        <title>对仇敌 复仇</title>
        <para>
            <informaltable>
            	<tgroup cols="5">
            		<colspec colnum="1" colname="1"/>
            		<colspec colnum="2" colname="2"/>
            		<colspec colnum="3" colname="3"/>
            		<colspec colnum="4" colname="4"/>
            		<colspec colnum="5" colname="5"/>
            		<tbody>
            			<row>
            				<entry>协议名称</entry>
                            <entry namest="2" nameend="5">复仇结束后，更新玩家的排名、积分、荣誉等信息</entry>
            			</row>
            			<row>
            				<entry>呼叫方</entry>
            				<entry>应答方</entry>
            				<entry>函数名</entry>
            				<entry>请求参数说明</entry>
            				<entry>返回值格式说明</entry>
            			</row>
            			<row>
            				<entry>客户端</entry>
            				<entry>网关服务器</entry>
            				<entry>sync_joust_revenge</entry>
            				<entry>
            					<informaltable>
            						<tgroup cols="3">
            							<colspec colnum="1" colname="1"/>
            							<colspec colnum="2" colname="2"/>
            							<colspec colnum="3" colname="3"/>
            							<tbody>
            								<row>
            									<entry>参数</entry>
            									<entry>类型</entry>
            									<entry>说明</entry>
            								</row>
            								<row>
            									<entry>enemy_cid</entry>
            									<entry>uint.</entry>
            									<entry>仇敌的玩家ID。</entry>
            								</row>
            								<row>
            									<entry>battle_status</entry>
            									<entry>uint</entry>
            									<entry>挑战后的结果。0:战斗失败; 1:战斗胜利</entry>
            								</row>
            							</tbody>
            						</tgroup>
            					</informaltable>
            				</entry>
            				<entry>
            					<informaltable>
            						<tgroup cols="3">
            							<colspec colnum="1" colname="1"/>
            							<colspec colnum="2" colname="2"/>
            							<colspec colnum="3" colname="3"/>
            							<tbody>
            								<row>
            									<entry>参数</entry>
            									<entry>类型</entry>
            									<entry>说明</entry>
            								</row>
            								<row>
            									<entry>result</entry>
            									<entry>uint</entry>
            									<entry>状态。0：获取成功。其它见<link linkend="errorlist">错误代码列表</link>.</entry>
            								</row>
            								<row>
            									<entry>data</entry>
            									<entry>Array(score, douzhan, left_count, lottery_items, honor)</entry>
            									<entry>挑战结束后同步玩家的数据。</entry>
            								</row>
            								<row>
            									<entry>score</entry>
            									<entry>uint</entry>
            									<entry>玩家获得的积分。</entry>
            								</row>
            								<row>
            									<entry>douzhan</entry>
            									<entry>uint</entry>
            									<entry>玩家剩余的斗战点数。</entry>
            								</row>
                                            <row>
                                                <entry>left_count</entry>
                                                <entry>uint.</entry>
                                                <entry>今日剩余可挑战次数, 含购买的次数。每日0点刷新。</entry>
                                            </row>
                                            <row>
                                                <entry>lottery_items</entry>
                                                <entry>Array(Array(item_type, item_id, item_num, msg_notice), ...)</entry>
            								    <entry>挑战胜利后，可供翻牌的道具列表。长度为3。</entry>
                                            </row>
                                            <row>
                                                <entry>honor</entry>
                                                <entry>uint.</entry>
                                                <entry>玩家的荣誉值。</entry>
                                            </row>
            							</tbody>
            						</tgroup>
            					</informaltable>
            				</entry>
            			</row>
            			<row>
            				<entry>协议说明</entry>
            				<entry namest="2" nameend="5"/>
            			</row>
            		</tbody>
            	</tgroup>
            </informaltable>
        </para>
    </section>

    <section>
        <title>获取荣誉兑换中玩家的兑换记录</title>
        <para>
            <informaltable>
            	<tgroup cols="5">
            		<colspec colnum="1" colname="1"/>
            		<colspec colnum="2" colname="2"/>
            		<colspec colnum="3" colname="3"/>
            		<colspec colnum="4" colname="4"/>
            		<colspec colnum="5" colname="5"/>
            		<tbody>
            			<row>
            				<entry>协议名称</entry>
                            <entry namest="2" nameend="5">获取荣誉兑换中玩家的兑换记录</entry>
            			</row>
            			<row>
            				<entry>呼叫方</entry>
            				<entry>应答方</entry>
            				<entry>函数名</entry>
            				<entry>请求参数说明</entry>
            				<entry>返回值格式说明</entry>
            			</row>
            			<row>
            				<entry>客户端</entry>
            				<entry>网关服务器</entry>
            				<entry>honor_exchange_status</entry>
            				<entry>
            					<informaltable>
            						<tgroup cols="3">
            							<colspec colnum="1" colname="1"/>
            							<colspec colnum="2" colname="2"/>
            							<colspec colnum="3" colname="3"/>
            							<tbody>
            								<row>
            									<entry>参数</entry>
            									<entry>类型</entry>
            									<entry>说明</entry>
            								</row>
            							</tbody>
            						</tgroup>
            					</informaltable>
            				</entry>
            				<entry>
            					<informaltable>
            						<tgroup cols="3">
            							<colspec colnum="1" colname="1"/>
            							<colspec colnum="2" colname="2"/>
            							<colspec colnum="3" colname="3"/>
            							<tbody>
            								<row>
            									<entry>参数</entry>
            									<entry>类型</entry>
            									<entry>说明</entry>
            								</row>
            								<row>
            									<entry>result</entry>
            									<entry>uint</entry>
            									<entry>状态。0：获取成功。其它见<link linkend="errorlist">错误代码列表</link>.</entry>
            								</row>
            								<row>
            									<entry>data</entry>
            									<entry>Array(Array(exchange_id, total_count, week_count, daily_count), ...)</entry>
            									<entry>玩家在大乱斗中的已兑换记录。</entry>
            								</row>
            								<row>
            									<entry>exchange_id</entry>
            									<entry>uint.</entry>
            									<entry>玩家已兑换的ID。可唯一标识一个可兑换的道具。</entry>
            								</row>
            								<row>
            									<entry>total_count</entry>
            									<entry>uint</entry>
            									<entry>总共已兑换的次数。</entry>
            								</row>
                                            <row>
                                                <entry>week_count</entry>
                                                <entry>uint.</entry>
                                                <entry>本周已兑换的次数。每周日晚23:59刷新。</entry>
                                            </row>
                                            <row>
                                                <entry>daily_count</entry>
                                                <entry>uint.</entry>
                                                <entry>今日已兑换的次数。每天晚23:59刷新。</entry>
                                            </row>
            							</tbody>
            						</tgroup>
            					</informaltable>
            				</entry>
            			</row>
            			<row>
            				<entry>协议说明</entry>
            				<entry namest="2" nameend="5"/>
            			</row>
            		</tbody>
            	</tgroup>
            </informaltable>
        </para>
    </section>

    <section>
        <title>荣誉兑换道具</title>
        <para>
            <informaltable>
            	<tgroup cols="5">
            		<colspec colnum="1" colname="1"/>
            		<colspec colnum="2" colname="2"/>
            		<colspec colnum="3" colname="3"/>
            		<colspec colnum="4" colname="4"/>
            		<colspec colnum="5" colname="5"/>
            		<tbody>
            			<row>
            				<entry>协议名称</entry>
                            <entry namest="2" nameend="5">用荣誉兑换道具</entry>
            			</row>
            			<row>
            				<entry>呼叫方</entry>
            				<entry>应答方</entry>
            				<entry>函数名</entry>
            				<entry>请求参数说明</entry>
            				<entry>返回值格式说明</entry>
            			</row>
            			<row>
            				<entry>客户端</entry>
            				<entry>网关服务器</entry>
            				<entry>honor_exchange</entry>
            				<entry>
            					<informaltable>
            						<tgroup cols="3">
            							<colspec colnum="1" colname="1"/>
            							<colspec colnum="2" colname="2"/>
            							<colspec colnum="3" colname="3"/>
            							<tbody>
            								<row>
            									<entry>参数</entry>
            									<entry>类型</entry>
            									<entry>说明</entry>
            								</row>
            								<row>
            									<entry>exchange_id</entry>
            									<entry>uint.</entry>
            									<entry>要兑换的ID。可唯一标识一个可兑换的道具。</entry>
            								</row>
            								<row>
            									<entry>exchange_count</entry>
            									<entry>uint.</entry>
            									<entry>兑换的道具个数。</entry>
            								</row>
            							</tbody>
            						</tgroup>
            					</informaltable>
            				</entry>
            				<entry>
            					<informaltable>
            						<tgroup cols="3">
            							<colspec colnum="1" colname="1"/>
            							<colspec colnum="2" colname="2"/>
            							<colspec colnum="3" colname="3"/>
            							<tbody>
            								<row>
            									<entry>参数</entry>
            									<entry>类型</entry>
            									<entry>说明</entry>
            								</row>
            								<row>
            									<entry>result</entry>
            									<entry>uint</entry>
            									<entry>状态。0：获取成功。其它见<link linkend="errorlist">错误代码列表</link>.</entry>
            								</row>
            								<row>
            									<entry>data</entry>
            									<entry>Array(honor, exchange_id, total_count, week_count, daily_count, add_items)</entry>
            									<entry>兑换后的详情。</entry>
            								</row>
            								<row>
            									<entry>honor</entry>
            									<entry>uint</entry>
            									<entry>玩家剩余的荣誉。</entry>
            								</row>
            								<row>
            									<entry>exchange_id</entry>
            									<entry>uint.</entry>
            									<entry>兑换的ID。可唯一标识一个可兑换的道具。</entry>
            								</row>
            								<row>
            									<entry>total_count</entry>
            									<entry>uint</entry>
            									<entry>总共已兑换的次数。</entry>
            								</row>
                                            <row>
                                                <entry>week_count</entry>
                                                <entry>uint.</entry>
                                                <entry>本周已兑换的次数。每周日晚23:59刷新。</entry>
                                            </row>
                                            <row>
                                                <entry>daily_count</entry>
                                                <entry>uint.</entry>
                                                <entry>今日已兑换的次数。每天晚23:59刷新。</entry>
                                            </row>
        									<row>
        										<entry>add_items</entry>
        										<entry>Array( Array(user_item_id, item_type, item_id, quantity), ... )</entry>
        										<entry>兑换获得的道具信息, client用于维护背包。</entry>
        									</row>
            							</tbody>
            						</tgroup>
            					</informaltable>
            				</entry>
            			</row>
            			<row>
            				<entry>协议说明</entry>
            				<entry namest="2" nameend="5"/>
            			</row>
            		</tbody>
            	</tgroup>
            </informaltable>
        </para>
    </section>

</chapter>
