<chapter>
	<title>战斗相关协议</title>
	<para>本章定义了所有战斗相关的通信协议格式。</para>
	<section>
		<title>[old] 获取副本群信息</title>
		<para>
			<informaltable>
				<tgroup cols="5">
					<colspec colnum="1" colname="1"/>
					<colspec colnum="2" colname="2"/>
					<colspec colnum="3" colname="3"/>
					<colspec colnum="4" colname="4"/>
					<colspec colnum="5" colname="5"/>
					<tbody>
						<row>
							<entry>协议名称</entry>
							<entry namest="2" nameend="5">获取伙伴列表信息, 老客户端使用</entry>
						</row>
						<row>
							<entry>呼叫方</entry>
							<entry>应答方</entry>
							<entry>函数名</entry>
							<entry>请求参数说明</entry>
							<entry>返回值格式说明</entry>
						</row>
						<row>
							<entry>客户端</entry>
							<entry>网关服务器</entry>
							<entry>get_scene_group</entry>
							<entry>
								<informaltable>
									<tgroup cols="3">
										<colspec colnum="1" colname="1"/>
										<colspec colnum="2" colname="2"/>
										<colspec colnum="3" colname="3"/>
										<tbody>
											<row>
												<entry>参数</entry>
												<entry>类型</entry>
												<entry>说明</entry>
											</row>
										</tbody>
									</tgroup>
								</informaltable>
							</entry>
							<entry>
								<informaltable>
									<tgroup cols="3">
										<colspec colnum="1" colname="1"/>
										<colspec colnum="2" colname="2"/>
										<colspec colnum="3" colname="3"/>
										<tbody>
											<row>
												<entry>参数</entry>
												<entry>类型</entry>
												<entry>说明</entry>
											</row>
											<row>
												<entry>result</entry>
												<entry>uint</entry>
												<entry>状态。0：获取成功。其它见<link linkend="errorlist">错误代码列表</link>.</entry>
											</row>
											<row>
												<entry>data</entry>
												<entry>Array(Array(scene_id,passed,cur_star,sweep_flag), ...)</entry>
												<entry>副本群信息，具体参数值如下：</entry>
											</row>
											<row>
												<entry>scene_id</entry>
												<entry>uint</entry>
												<entry>副本ID.</entry>
											</row>
											<row>
												<entry>passed</entry>
												<entry>uint</entry>
												<entry>是否已通关.</entry>
											</row>
											<row>
												<entry>cur_star</entry>
												<entry>uint</entry>
												<entry>当前副本已获得的星星数量.</entry>
											</row>
											<row>
												<entry>sweep_flag</entry>
												<entry>uint</entry>
												<entry>是否可全扫荡的标志位.0-不可全扫荡, 1-可全扫荡</entry>
											</row>
										</tbody>
									</tgroup>
								</informaltable>
							</entry>
						</row>
						<row>
							<entry>协议说明</entry>
							<entry namest="2" nameend="5"/>
						</row>
					</tbody>
				</tgroup>
			</informaltable>
		</para>
	</section>

	<section>
		<title>[new] 获取副本群信息</title>
		<para>
			<informaltable>
				<tgroup cols="5">
					<colspec colnum="1" colname="1"/>
					<colspec colnum="2" colname="2"/>
					<colspec colnum="3" colname="3"/>
					<colspec colnum="4" colname="4"/>
					<colspec colnum="5" colname="5"/>
					<tbody>
						<row>
							<entry>协议名称</entry>
							<entry namest="2" nameend="5">获取伙伴列表信息 v0.3.3.2版本后使用</entry>
						</row>
						<row>
							<entry>呼叫方</entry>
							<entry>应答方</entry>
							<entry>函数名</entry>
							<entry>请求参数说明</entry>
							<entry>返回值格式说明</entry>
						</row>
						<row>
							<entry>客户端</entry>
							<entry>网关服务器</entry>
							<entry>get_scene_group_new</entry>
							<entry>
								<informaltable>
									<tgroup cols="3">
										<colspec colnum="1" colname="1"/>
										<colspec colnum="2" colname="2"/>
										<colspec colnum="3" colname="3"/>
										<tbody>
											<row>
												<entry>参数</entry>
												<entry>类型</entry>
												<entry>说明</entry>
											</row>
										</tbody>
									</tgroup>
								</informaltable>
							</entry>
							<entry>
								<informaltable>
									<tgroup cols="3">
										<colspec colnum="1" colname="1"/>
										<colspec colnum="2" colname="2"/>
										<colspec colnum="3" colname="3"/>
										<tbody>
											<row>
												<entry>参数</entry>
												<entry>类型</entry>
												<entry>说明</entry>
											</row>
											<row>
												<entry>result</entry>
												<entry>uint</entry>
												<entry>状态。0：获取成功。其它见<link linkend="errorlist">错误代码列表</link>.</entry>
											</row>
											<row>
												<entry>data</entry>
												<entry>Array(Array(Array(scene_id,passed,cur_star,sweep_flag), ...), had_sweep, item_had_reset, credit_had_reset)</entry>
												<entry>副本群信息，具体参数值如下：</entry>
											</row>
											<row>
												<entry>scene_id</entry>
												<entry>uint</entry>
												<entry>副本ID.</entry>
											</row>
											<row>
												<entry>passed</entry>
												<entry>uint</entry>
												<entry>是否已通关.</entry>
											</row>
											<row>
												<entry>cur_star</entry>
												<entry>uint</entry>
												<entry>当前副本已获得的星星数量.</entry>
											</row>
											<row>
												<entry>sweep_flag</entry>
												<entry>uint</entry>
												<entry>是否可全扫荡的标志位.0-不可全扫荡, 1-可全扫荡</entry>
											</row>
											<row>
												<entry>had_sweep</entry>
												<entry>uint</entry>
												<entry>今日已扫荡的次数.</entry>
											</row>
											<row>
												<entry>item_had_reset</entry>
												<entry>uint</entry>
												<entry>今日道具重置的次数.</entry>
											</row>
											<row>
												<entry>credit_had_reset</entry>
												<entry>uint</entry>
												<entry>今日钻石重置的次数.</entry>
											</row>
										</tbody>
									</tgroup>
								</informaltable>
							</entry>
						</row>
						<row>
							<entry>协议说明</entry>
							<entry namest="2" nameend="5"/>
						</row>
					</tbody>
				</tgroup>
			</informaltable>
		</para>
	</section>

	<section>
		<title>[old] 获取副本内怪物信息</title>
		<para>
			<informaltable>
				<tgroup cols="5">
					<colspec colnum="1" colname="1"/>
					<colspec colnum="2" colname="2"/>
					<colspec colnum="3" colname="3"/>
					<colspec colnum="4" colname="4"/>
					<colspec colnum="5" colname="5"/>
					<tbody>
						<row>
							<entry>协议名称</entry>
							<entry namest="2" nameend="5">获取副本内怪物信息, 老版本客户端用</entry>
						</row>
						<row>
							<entry>呼叫方</entry>
							<entry>应答方</entry>
							<entry>函数名</entry>
							<entry>请求参数说明</entry>
							<entry>返回值格式说明</entry>
						</row>
						<row>
							<entry>客户端</entry>
							<entry>网关服务器</entry>
							<entry>get_monster_group</entry>
							<entry>
								<informaltable>
									<tgroup cols="3">
										<colspec colnum="1" colname="1"/>
										<colspec colnum="2" colname="2"/>
										<colspec colnum="3" colname="3"/>
										<tbody>
											<row>
												<entry>参数</entry>
												<entry>类型</entry>
												<entry>说明</entry>
											</row>
											<row>
												<entry>scene_id</entry>
												<entry>uint</entry>
												<entry>副本ID</entry>
											</row>
										</tbody>
									</tgroup>
								</informaltable>
							</entry>
							<entry>
								<informaltable>
									<tgroup cols="3">
										<colspec colnum="1" colname="1"/>
										<colspec colnum="2" colname="2"/>
										<colspec colnum="3" colname="3"/>
										<tbody>
											<row>
												<entry>参数</entry>
												<entry>类型</entry>
												<entry>说明</entry>
											</row>
											<row>
												<entry>result</entry>
												<entry>uint</entry>
												<entry>状态。0：获取成功。其它见<link linkend="errorlist">错误代码列表</link>.</entry>
											</row>
											<row>
												<entry>dungeon_data_list</entry>
												<entry>Array(Array(dungeon_id, dungeon_star, dungeon_today_challenge), ...)</entry>
												<entry>副本群信息，具体参数值如下：</entry>
											</row>
											<row>
												<entry>dungeon_id</entry>
												<entry>uint</entry>
												<entry>怪物组ID.</entry>
											</row>
											<row>
												<entry>dungeon_star</entry>
												<entry>uint</entry>
												<entry>怪物组的星级难度.</entry>
											</row>
											<row>
												<entry>dungeon_today_challenge</entry>
												<entry>uint</entry>
												<entry>今日已挑战次数.</entry>
											</row>
										</tbody>
									</tgroup>
								</informaltable>
							</entry>
						</row>
						<row>
							<entry>协议说明</entry>
							<entry namest="2" nameend="5"/>
						</row>
					</tbody>
				</tgroup>
			</informaltable>
		</para>
	</section>

	<section>
		<title>[new] 获取副本内怪物信息</title>
		<para>
			<informaltable>
				<tgroup cols="5">
					<colspec colnum="1" colname="1"/>
					<colspec colnum="2" colname="2"/>
					<colspec colnum="3" colname="3"/>
					<colspec colnum="4" colname="4"/>
					<colspec colnum="5" colname="5"/>
					<tbody>
						<row>
							<entry>协议名称</entry>
							<entry namest="2" nameend="5">获取副本内怪物信息, v0.3.3.2版本后使用</entry>
						</row>
						<row>
							<entry>呼叫方</entry>
							<entry>应答方</entry>
							<entry>函数名</entry>
							<entry>请求参数说明</entry>
							<entry>返回值格式说明</entry>
						</row>
						<row>
							<entry>客户端</entry>
							<entry>网关服务器</entry>
							<entry>get_monster_group_new</entry>
							<entry>
								<informaltable>
									<tgroup cols="3">
										<colspec colnum="1" colname="1"/>
										<colspec colnum="2" colname="2"/>
										<colspec colnum="3" colname="3"/>
										<tbody>
											<row>
												<entry>参数</entry>
												<entry>类型</entry>
												<entry>说明</entry>
											</row>
											<row>
												<entry>scene_id</entry>
												<entry>uint</entry>
												<entry>副本ID</entry>
											</row>
										</tbody>
									</tgroup>
								</informaltable>
							</entry>
							<entry>
								<informaltable>
									<tgroup cols="3">
										<colspec colnum="1" colname="1"/>
										<colspec colnum="2" colname="2"/>
										<colspec colnum="3" colname="3"/>
										<tbody>
											<row>
												<entry>参数</entry>
												<entry>类型</entry>
												<entry>说明</entry>
											</row>
											<row>
												<entry>result</entry>
												<entry>uint</entry>
												<entry>状态。0：获取成功。其它见<link linkend="errorlist">错误代码列表</link>.</entry>
											</row>
											<row>
												<entry>dungeon_data_list</entry>
												<entry>Array(Array(dungeon_id, dungeon_star, dungeon_today_challenge, dungeon_award), ...)</entry>
												<entry>副本群信息，具体参数值如下：</entry>
											</row>
											<row>
												<entry>dungeon_id</entry>
												<entry>uint</entry>
												<entry>怪物组ID.</entry>
											</row>
											<row>
												<entry>dungeon_star</entry>
												<entry>uint</entry>
												<entry>怪物组的星级难度.</entry>
											</row>
											<row>
												<entry>dungeon_today_challenge</entry>
												<entry>uint</entry>
												<entry>今日已挑战次数.</entry>
											</row>
											<row>
												<entry>dungeon_award</entry>
												<entry>uint</entry>
												<entry>怪物组的宝箱领奖状态. 0-未领取, 1-已领取。</entry>
											</row>
										</tbody>
									</tgroup>
								</informaltable>
							</entry>
						</row>
						<row>
							<entry>协议说明</entry>
							<entry namest="2" nameend="5"/>
						</row>
					</tbody>
				</tgroup>
			</informaltable>
		</para>
	</section>

	<section>
		<title>获取多个副本的怪物信息</title>
		<para>
			<informaltable>
				<tgroup cols="5">
					<colspec colnum="1" colname="1"/>
					<colspec colnum="2" colname="2"/>
					<colspec colnum="3" colname="3"/>
					<colspec colnum="4" colname="4"/>
					<colspec colnum="5" colname="5"/>
					<tbody>
						<row>
							<entry>协议名称</entry>
							<entry namest="2" nameend="5">获取多个副本的怪物信息</entry>
						</row>
						<row>
							<entry>呼叫方</entry>
							<entry>应答方</entry>
							<entry>函数名</entry>
							<entry>请求参数说明</entry>
							<entry>返回值格式说明</entry>
						</row>
						<row>
							<entry>客户端</entry>
							<entry>网关服务器</entry>
							<entry>multi_monster_group</entry>
							<entry>
								<informaltable>
									<tgroup cols="3">
										<colspec colnum="1" colname="1"/>
										<colspec colnum="2" colname="2"/>
										<colspec colnum="3" colname="3"/>
										<tbody>
											<row>
												<entry>参数</entry>
												<entry>类型</entry>
												<entry>说明</entry>
											</row>
											<row>
												<entry>multi_scene_ids</entry>
												<entry>Array(scene_id, scene_id, ...)</entry>
												<entry>多个副本ID</entry>
											</row>
										</tbody>
									</tgroup>
								</informaltable>
							</entry>
							<entry>
								<informaltable>
									<tgroup cols="3">
										<colspec colnum="1" colname="1"/>
										<colspec colnum="2" colname="2"/>
										<colspec colnum="3" colname="3"/>
										<tbody>
											<row>
												<entry>参数</entry>
												<entry>类型</entry>
												<entry>说明</entry>
											</row>
											<row>
												<entry>result</entry>
												<entry>uint</entry>
												<entry>状态。0：获取成功。其它见<link linkend="errorlist">错误代码列表</link>.</entry>
											</row>
											<row>
												<entry>data</entry>
												<entry>Array(Array(scene_id, passed, cur_star, dungeon_data_list), ...)</entry>
												<entry>副本ID及副本ID的怪物组ID.</entry>
											</row>
											<row>
												<entry>scene_id</entry>
												<entry>uint</entry>
												<entry>副本ID.</entry>
											</row>
											<row>
												<entry>passed</entry>
												<entry>uint</entry>
												<entry>是否已通关.</entry>
											</row>
											<row>
												<entry>cur_star</entry>
												<entry>uint</entry>
												<entry>当前副本已获得的星星数量.</entry>
											</row>
											<row>
												<entry>dungeon_data_list</entry>
												<entry>Array(Array(dungeon_id,cur_star, cur_today_challenge), ...)</entry>
												<entry>副本群信息，具体参数值如下：</entry>
											</row>
											<row>
												<entry>dungeon_id</entry>
												<entry>uint</entry>
												<entry>怪物组ID.</entry>
											</row>
											<row>
												<entry>dungeon_star</entry>
												<entry>uint</entry>
												<entry>怪物组的星级难度.</entry>
											</row>
											<row>
												<entry>dungeon_today_challenge</entry>
												<entry>uint</entry>
												<entry>今日已挑战次数.</entry>
											</row>
										</tbody>
									</tgroup>
								</informaltable>
							</entry>
						</row>
						<row>
							<entry>协议说明</entry>
							<entry namest="2" nameend="5"/>
						</row>
					</tbody>
				</tgroup>
			</informaltable>
		</para>
	</section>

	<section>
		<title>进入战斗</title>
		<para>
			<informaltable>
				<tgroup cols="5">
					<colspec colnum="1" colname="1"/>
					<colspec colnum="2" colname="2"/>
					<colspec colnum="3" colname="3"/>
					<colspec colnum="4" colname="4"/>
					<colspec colnum="5" colname="5"/>
					<tbody>
						<row>
							<entry>协议名称</entry>
							<entry namest="2" nameend="5">进入战斗</entry>
						</row>
						<row>
							<entry>呼叫方</entry>
							<entry>应答方</entry>
							<entry>函数名</entry>
							<entry>请求参数说明</entry>
							<entry>返回值格式说明</entry>
						</row>
						<row>
							<entry>客户端</entry>
							<entry>网关服务器</entry>
							<entry>start_battle</entry>
							<entry>
								<informaltable>
									<tgroup cols="3">
										<colspec colnum="1" colname="1"/>
										<colspec colnum="2" colname="2"/>
										<colspec colnum="3" colname="3"/>
										<tbody>
											<row>
												<entry>参数</entry>
												<entry>类型</entry>
												<entry>说明</entry>
											</row>
											<row>
												<entry>scene_type</entry>
												<entry>uint</entry>
												<entry>副本类型。1:剧情副本; 2:精英副本; 3:活动副本之经验熊猫; 4:活动副本之经验宝物; 5:活动副本之打土豪; 6:天外天</entry>
											</row>
											<row>
												<entry>scene_id</entry>
												<entry>uint</entry>
												<entry>副本ID</entry>
											</row>
											<row>
												<entry>dungeon_id</entry>
												<entry>uint</entry>
												<entry>怪物组ID</entry>
											</row>
											<row>
												<entry>dungeon_star</entry>
												<entry>uint</entry>
												<entry>怪物组当前星级.</entry>
											</row>
										</tbody>
									</tgroup>
								</informaltable>
							</entry>
							<entry>
								<informaltable>
									<tgroup cols="3">
										<colspec colnum="1" colname="1"/>
										<colspec colnum="2" colname="2"/>
										<colspec colnum="3" colname="3"/>
										<tbody>
											<row>
												<entry>参数</entry>
												<entry>类型</entry>
												<entry>说明</entry>
											</row>
											<row>
												<entry>result</entry>
												<entry>uint</entry>
												<entry>状态。0：获取成功。其它见<link linkend="errorlist">错误代码列表</link>.</entry>
											</row>
										</tbody>
									</tgroup>
								</informaltable>
							</entry>
						</row>
						<row>
							<entry>协议说明</entry>
							<entry namest="2" nameend="5"/>
						</row>
					</tbody>
				</tgroup>
			</informaltable>
		</para>
	</section>
	<section>
		<title>索要战斗奖励</title>
		<para>
			<informaltable>
				<tgroup cols="5">
					<colspec colnum="1" colname="1"/>
					<colspec colnum="2" colname="2"/>
					<colspec colnum="3" colname="3"/>
					<colspec colnum="4" colname="4"/>
					<colspec colnum="5" colname="5"/>
					<tbody>
						<row>
							<entry>协议名称</entry>
							<entry namest="2" nameend="5">索要战斗奖励</entry>
						</row>
						<row>
							<entry>呼叫方</entry>
							<entry>应答方</entry>
							<entry>函数名</entry>
							<entry>请求参数说明</entry>
							<entry>返回值格式说明</entry>
						</row>
						<row>
							<entry>客户端</entry>
							<entry>网关服务器</entry>
							<entry>request_battle_reward</entry>
							<entry>
								<informaltable>
									<tgroup cols="3">
										<colspec colnum="1" colname="1"/>
										<colspec colnum="2" colname="2"/>
										<colspec colnum="3" colname="3"/>
										<tbody>
											<row>
												<entry>参数</entry>
												<entry>类型</entry>
												<entry>说明</entry>
											</row>
											<row>
												<entry>scene_type</entry>
												<entry>uint</entry>
												<entry>副本类型。1:剧情副本; 2:精英副本; 3:活动副本之经验熊猫; 4:活动副本之经验宝物; 5:活动副本之打土豪; </entry>
											</row>
											<row>
												<entry>battle_status</entry>
												<entry>uint</entry>
												<entry>战斗结果状态. 0:战斗失败;1:战斗成功。注: scene_type=5时此字段值为有效伤害值。</entry>
											</row>
											<row>
												<entry>scene_id</entry>
												<entry>uint</entry>
												<entry>副本ID</entry>
											</row>
											<row>
												<entry>dungeon_id</entry>
												<entry>uint</entry>
												<entry>怪物组ID.</entry>
											</row>
											<row>
												<entry>dungeon_star</entry>
												<entry>uint</entry>
												<entry>怪物组当前星级难度.</entry>
											</row>
										</tbody>
									</tgroup>
								</informaltable>
							</entry>
							<entry>
								<informaltable>
									<tgroup cols="3">
										<colspec colnum="1" colname="1"/>
										<colspec colnum="2" colname="2"/>
										<colspec colnum="3" colname="3"/>
										<tbody>
											<row>
												<entry>参数</entry>
												<entry>类型</entry>
												<entry>说明</entry>
											</row>
											<row>
												<entry>result</entry>
												<entry>uint</entry>
												<entry>状态。0：获取成功。其它见<link linkend="errorlist">错误代码列表</link>.</entry>
											</row>
											<row>
												<entry>data</entry>
												<entry>Array(scene_type, battle_status, dungeon_id, dungeon_star, challenge_count, drop_items, add_gold, add_soul, add_exp, energy)</entry>
												<entry>战斗结束后的副本信息。详细参数如下: </entry>
											</row>
											<row>
												<entry>scene_type</entry>
												<entry>uint</entry>
												<entry>副本类型。1:剧情副本; 2:精英副本; 3:活动副本之经验熊猫; 4:活动副本之经验宝物; 5:活动副本之打土豪; </entry>
											</row>
											<row>
												<entry>battle_status</entry>
												<entry>uint</entry>
												<entry>战斗结果状态. 0:战斗失败;1:战斗成功</entry>
											</row>
											<row>
												<entry>dungeon_id</entry>
												<entry>uint</entry>
												<entry>怪物组ID.</entry>
											</row>
											<row>
												<entry>dungeon_star</entry>
												<entry>uint</entry>
												<entry>type=1时为怪物组当前星级难度.</entry>
											</row>
											<row>
												<entry>challenge_count</entry>
												<entry>uint</entry>
												<entry>type=1时为今日已挑战次数; type=2,3,4,5时为剩余的可挑战次数.</entry>
											</row>
											<row>
												<entry>drop_items</entry>
                                                <entry>Array( Array(user_item_id, item_type, item_id, quantity), ...)</entry>
												<entry>奖励道具列表, 具体参数值如下：</entry>
											</row>
											<row>
												<entry>user_item_id</entry>
												<entry>uint</entry>
												<entry>玩家道具ID。item_type=1时user_item_id为0。</entry>
											</row>
											<row>
												<entry>item_type</entry>
												<entry>uint</entry>
												<entry>道具类型, 含金币、仙魂</entry>
											</row>
											<row>
												<entry>item_id</entry>
												<entry>uint</entry>
												<entry>道具ID</entry>
											</row>
											<row>
												<entry>quantity</entry>
												<entry>uint</entry>
												<entry>道具数量</entry>
											</row>
											<row>
												<entry>add_gold</entry>
												<entry>uint</entry>
												<entry>获得金币</entry>
											</row>
											<row>
												<entry>add_soul</entry>
												<entry>uint</entry>
												<entry>获得仙魂</entry>
											</row>
											<row>
												<entry>add_exp</entry>
												<entry>uint</entry>
												<entry>获得经验</entry>
											</row>
											<row>
												<entry>energy</entry>
												<entry>uint</entry>
												<entry>玩家剩余的精力值。</entry>
											</row>
										</tbody>
									</tgroup>
								</informaltable>
							</entry>
						</row>
						<row>
							<entry>协议说明</entry>
							<entry namest="2" nameend="5"/>
						</row>
					</tbody>
				</tgroup>
			</informaltable>
		</para>
	</section>

	<section>
        <title>获取副本宝箱领奖状态</title>
        <para>
            <informaltable>
                <tgroup cols="5">
					<colspec colnum="1" colname="1"/>
					<colspec colnum="2" colname="2"/>
					<colspec colnum="3" colname="3"/>
					<colspec colnum="4" colname="4"/>
					<colspec colnum="5" colname="5"/>
					<tbody>
						<row>
							<entry>协议名称</entry>
							<entry namest="2" nameend="5">获取副本宝箱领奖状态</entry>
						</row>
						<row>
							<entry>呼叫方</entry>
							<entry>应答方</entry>
							<entry>函数名</entry>
							<entry>请求参数说明</entry>
							<entry>返回值格式说明</entry>
						</row>
						<row>
							<entry>客户端</entry>
							<entry>网关服务器</entry>
							<entry>scene_star_rewarded</entry>
							<entry>
								<informaltable>
									<tgroup cols="3">
										<colspec colnum="1" colname="1"/>
										<colspec colnum="2" colname="2"/>
										<colspec colnum="3" colname="3"/>
										<tbody>
											<row>
												<entry>参数</entry>
												<entry>类型</entry>
												<entry>说明</entry>
											</row>
											<row>
												<entry>scene_id</entry>
												<entry>uint</entry>
												<entry>副本ID.</entry>
											</row>
										</tbody>
									</tgroup>
								</informaltable>
							</entry>
							<entry>
								<informaltable>
									<tgroup cols="3">
										<colspec colnum="1" colname="1"/>
										<colspec colnum="2" colname="2"/>
										<colspec colnum="3" colname="3"/>
										<tbody>
											<row>
												<entry>参数</entry>
												<entry>类型</entry>
												<entry>说明</entry>
											</row>
											<row>
												<entry>result</entry>
												<entry>uint</entry>
												<entry>状态。0：获取成功。其它见<link linkend="errorlist">错误代码列表</link>.</entry>
											</row>
											<row>
												<entry>data</entry>
												<entry>Array( scene_star_count, ... )</entry>
												<entry>星数奖励. 详细参数如下：</entry>
											</row>
											<row>
												<entry>scene_star_count</entry>
												<entry>uint</entry>
												<entry>副本中已领奖的星数奖励档位</entry>
											</row>
										</tbody>
									</tgroup>
								</informaltable>
							</entry>
						</row>
						<row>
							<entry>协议说明</entry>
							<entry namest="2" nameend="5"/>
						</row>
					</tbody>
				</tgroup>
			</informaltable>
		</para>
	</section>

	<section>
        <title>领取副本宝箱奖励</title>
        <para>
            <informaltable>
                <tgroup cols="5">
					<colspec colnum="1" colname="1"/>
					<colspec colnum="2" colname="2"/>
					<colspec colnum="3" colname="3"/>
					<colspec colnum="4" colname="4"/>
					<colspec colnum="5" colname="5"/>
					<tbody>
						<row>
							<entry>协议名称</entry>
							<entry namest="2" nameend="5">领取副本宝箱奖励</entry>
						</row>
						<row>
							<entry>呼叫方</entry>
							<entry>应答方</entry>
							<entry>函数名</entry>
							<entry>请求参数说明</entry>
							<entry>返回值格式说明</entry>
						</row>
						<row>
							<entry>客户端</entry>
							<entry>网关服务器</entry>
							<entry>get_scene_star_reward</entry>
							<entry>
								<informaltable>
									<tgroup cols="3">
										<colspec colnum="1" colname="1"/>
										<colspec colnum="2" colname="2"/>
										<colspec colnum="3" colname="3"/>
										<tbody>
											<row>
												<entry>参数</entry>
												<entry>类型</entry>
												<entry>说明</entry>
											</row>
											<row>
												<entry>scene_id</entry>
												<entry>uint</entry>
												<entry>副本ID.</entry>
											</row>
											<row>
												<entry>scene_star_count</entry>
												<entry>uint</entry>
												<entry>副本的星数奖励档位</entry>
											</row>
										</tbody>
									</tgroup>
								</informaltable>
							</entry>
							<entry>
								<informaltable>
									<tgroup cols="3">
										<colspec colnum="1" colname="1"/>
										<colspec colnum="2" colname="2"/>
										<colspec colnum="3" colname="3"/>
										<tbody>
											<row>
												<entry>参数</entry>
												<entry>类型</entry>
												<entry>说明</entry>
											</row>
											<row>
												<entry>result</entry>
												<entry>uint</entry>
												<entry>状态。0：获取成功。其它见<link linkend="errorlist">错误代码列表</link>.</entry>
											</row>
											<row>
												<entry>data</entry>
												<entry>Array( Array(user_item_id, item_type, item_id, quantity), ... )</entry>
												<entry>星数奖励. 详细参数如下：</entry>
											</row>
											<row>
												<entry>user_item_id</entry>
												<entry>uint</entry>
												<entry>玩家道具ID。item_type=1时user_item_id为0。</entry>
											</row>
											<row>
												<entry>item_type</entry>
												<entry>uint</entry>
												<entry>奖励的道具类型, 含金币、仙魂</entry>
											</row>
											<row>
												<entry>item_id</entry>
												<entry>uint</entry>
												<entry>奖励的道具ID</entry>
											</row>
											<row>
												<entry>quantity</entry>
												<entry>uint</entry>
												<entry>奖励的道具数量</entry>
											</row>
										</tbody>
									</tgroup>
								</informaltable>
							</entry>
						</row>
						<row>
							<entry>协议说明</entry>
							<entry namest="2" nameend="5"/>
						</row>
					</tbody>
				</tgroup>
			</informaltable>
		</para>
	</section>

	<section>
		<title>连战连胜</title>
		<para>
			<informaltable>
				<tgroup cols="5">
					<colspec colnum="1" colname="1"/>
					<colspec colnum="2" colname="2"/>
					<colspec colnum="3" colname="3"/>
					<colspec colnum="4" colname="4"/>
					<colspec colnum="5" colname="5"/>
					<tbody>
						<row>
							<entry>协议名称</entry>
							<entry namest="2" nameend="5">连续多次战斗, 并获得胜利</entry>
						</row>
						<row>
							<entry>呼叫方</entry>
							<entry>应答方</entry>
							<entry>函数名</entry>
							<entry>请求参数说明</entry>
							<entry>返回值格式说明</entry>
						</row>
						<row>
							<entry>客户端</entry>
							<entry>网关服务器</entry>
							<entry>battle_win_streak</entry>
							<entry>
								<informaltable>
									<tgroup cols="3">
										<colspec colnum="1" colname="1"/>
										<colspec colnum="2" colname="2"/>
										<colspec colnum="3" colname="3"/>
										<tbody>
											<row>
												<entry>参数</entry>
												<entry>类型</entry>
												<entry>说明</entry>
											</row>
											<row>
												<entry>scene_id</entry>
												<entry>uint</entry>
												<entry>副本ID。</entry>
											</row>
											<row>
												<entry>dungeon_id</entry>
												<entry>uint</entry>
												<entry>怪物组ID。</entry>
											</row>
											<row>
												<entry>dungeon_star</entry>
												<entry>uint</entry>
												<entry>怪物组当前星级难度。</entry>
											</row>
											<row>
												<entry>battle_count</entry>
												<entry>uint</entry>
												<entry>连战次数。</entry>
											</row>
										</tbody>
									</tgroup>
								</informaltable>
							</entry>
							<entry>
								<informaltable>
									<tgroup cols="3">
										<colspec colnum="1" colname="1"/>
										<colspec colnum="2" colname="2"/>
										<colspec colnum="3" colname="3"/>
										<tbody>
											<row>
												<entry>参数</entry>
												<entry>类型</entry>
												<entry>说明</entry>
											</row>
											<row>
												<entry>result</entry>
												<entry>uint</entry>
												<entry>状态。0：获取成功。其它见<link linkend="errorlist">错误代码列表</link>.</entry>
											</row>
											<row>
												<entry>data</entry>
												<entry>Array(dungeon_id, dungeon_star, dungeon_today_challenge, dungeon_drop, add_items, energy, end_cd_time)</entry>
												<entry>连续战斗结束后的副本信息及掉落详情。详细参数如下: </entry>
											</row>
											<row>
												<entry>dungeon_id</entry>
												<entry>uint</entry>
												<entry>怪物组ID.</entry>
											</row>
											<row>
												<entry>dungeon_star</entry>
												<entry>uint</entry>
												<entry>怪物组当前星级难度.</entry>
											</row>
											<row>
												<entry>dungeon_today_challenge</entry>
												<entry>uint</entry>
												<entry>今日已挑战次数.</entry>
											</row>
											<row>
												<entry>dungeon_drop</entry>
												<entry>Array(Array(drop_items, add_gold, add_soul, add_exp), ...)</entry>
												<entry>每次战斗结束后的掉落及奖励。长度为连战的次数。详细参数如下：</entry>
											</row>
											<row>
												<entry>drop_items</entry>
                                                <entry>Array( Array(item_type, item_id, quantity), ...)</entry>
												<entry>掉落的道具列表, 用于client展示。</entry>
											</row>
											<row>
												<entry>add_gold</entry>
												<entry>uint</entry>
												<entry>获得金币</entry>
											</row>
											<row>
												<entry>add_soul</entry>
												<entry>uint</entry>
												<entry>获得仙魂</entry>
											</row>
											<row>
												<entry>add_exp</entry>
												<entry>uint</entry>
												<entry>获得经验</entry>
											</row>
											<row>
												<entry>add_items</entry>
                                                <entry>Array( Array(user_item_id, item_type, item_id, quantity), ...)</entry>
												<entry>玩家背包新增的道具信息, 用于client维护背包。</entry>
											</row>
											<row>
												<entry>user_item_id</entry>
												<entry>uint</entry>
												<entry>玩家道具ID。item_type=1时user_item_id为0。</entry>
											</row>
											<row>
												<entry>item_type</entry>
												<entry>uint</entry>
												<entry>道具类型, 含金币、仙魂</entry>
											</row>
											<row>
												<entry>item_id</entry>
												<entry>uint</entry>
												<entry>道具ID</entry>
											</row>
											<row>
												<entry>quantity</entry>
												<entry>uint</entry>
												<entry>道具数量</entry>
											</row>
											<row>
												<entry>energy</entry>
												<entry>uint</entry>
												<entry>玩家剩余的精力值。</entry>
											</row>
											<row>
												<entry>end_cd_time</entry>
												<entry>uint</entry>
												<entry>副本连续战斗的冷却结束时间。</entry>
											</row>
										</tbody>
									</tgroup>
								</informaltable>
							</entry>
						</row>
						<row>
							<entry>协议说明</entry>
							<entry namest="2" nameend="5"/>
						</row>
					</tbody>
				</tgroup>
			</informaltable>
		</para>
	</section>

	<section>
        <title>购买剧情副本的连战冷却时间</title>
		<para>
			<informaltable>
				<tgroup cols="5">
					<colspec colnum="1" colname="1"/>
					<colspec colnum="2" colname="2"/>
					<colspec colnum="3" colname="3"/>
					<colspec colnum="4" colname="4"/>
					<colspec colnum="5" colname="5"/>
					<tbody>
						<row>
							<entry>协议名称</entry>
							<entry namest="2" nameend="5">可用钻石清除当前连战冷却时间</entry>
						</row>
						<row>
							<entry>呼叫方</entry>
							<entry>应答方</entry>
							<entry>函数名</entry>
							<entry>请求参数说明</entry>
							<entry>返回值格式说明</entry>
						</row>
						<row>
							<entry>客户端</entry>
							<entry>网关服务器</entry>
							<entry>buy_battle_cd_time</entry>
							<entry>
								<informaltable>
									<tgroup cols="3">
										<colspec colnum="1" colname="1"/>
										<colspec colnum="2" colname="2"/>
										<colspec colnum="3" colname="3"/>
										<tbody>
											<row>
												<entry>参数</entry>
												<entry>类型</entry>
												<entry>说明</entry>
											</row>
										</tbody>
									</tgroup>
								</informaltable>
							</entry>
							<entry>
								<informaltable>
									<tgroup cols="3">
										<colspec colnum="1" colname="1"/>
										<colspec colnum="2" colname="2"/>
										<colspec colnum="3" colname="3"/>
										<tbody>
											<row>
												<entry>参数</entry>
												<entry>类型</entry>
												<entry>说明</entry>
											</row>
											<row>
												<entry>result</entry>
												<entry>uint</entry>
												<entry>状态。0：获取成功。其它见<link linkend="errorlist">错误代码列表</link>.</entry>
											</row>
                                            <row>
                                                <entry>data</entry>
                                                <entry>Array(credits)</entry>
                                                <entry>玩家购买后的信息。</entry>
                                            </row>
                                            <row>
                                                <entry>credits</entry>
                                                <entry>uint</entry>
                                                <entry>玩家剩余的钻石数。</entry>
                                            </row>
										</tbody>
									</tgroup>
								</informaltable>
							</entry>
						</row>
						<row>
							<entry>协议说明</entry>
							<entry namest="2" nameend="5"/>
						</row>
					</tbody>
				</tgroup>
			</informaltable>
		</para>
	</section>

	<section>
        <title>获取精英副本的基本信息</title>
		<para>
			<informaltable>
				<tgroup cols="5">
					<colspec colnum="1" colname="1"/>
					<colspec colnum="2" colname="2"/>
					<colspec colnum="3" colname="3"/>
					<colspec colnum="4" colname="4"/>
					<colspec colnum="5" colname="5"/>
					<tbody>
						<row>
							<entry>协议名称</entry>
							<entry namest="2" nameend="5">获取精英副本的基本信息</entry>
						</row>
						<row>
							<entry>呼叫方</entry>
							<entry>应答方</entry>
							<entry>函数名</entry>
							<entry>请求参数说明</entry>
							<entry>返回值格式说明</entry>
						</row>
						<row>
							<entry>客户端</entry>
							<entry>网关服务器</entry>
							<entry>elitescene_data</entry>
							<entry>
								<informaltable>
									<tgroup cols="3">
										<colspec colnum="1" colname="1"/>
										<colspec colnum="2" colname="2"/>
										<colspec colnum="3" colname="3"/>
										<tbody>
											<row>
												<entry>参数</entry>
												<entry>类型</entry>
												<entry>说明</entry>
											</row>
										</tbody>
									</tgroup>
								</informaltable>
							</entry>
							<entry>
								<informaltable>
									<tgroup cols="3">
										<colspec colnum="1" colname="1"/>
										<colspec colnum="2" colname="2"/>
										<colspec colnum="3" colname="3"/>
										<tbody>
											<row>
												<entry>参数</entry>
												<entry>类型</entry>
												<entry>说明</entry>
											</row>
											<row>
												<entry>result</entry>
												<entry>uint</entry>
												<entry>状态。0：获取成功。其它见<link linkend="errorlist">错误代码列表</link>.</entry>
											</row>
											<row>
												<entry>data</entry>
												<entry>Array(fight_count, left_buy_fight_count, passed_elitescene_ids)</entry>
												<entry>玩家的精英副本的信息。</entry>
											</row>
                                            <row>
                                                <entry>fight_count</entry>
                                                <entry>uint</entry>
                                                <entry>玩家可挑战的次数。</entry>
                                            </row>
                                            <row>
                                                <entry>left_buy_fight_count</entry>
                                                <entry>uint</entry>
                                                <entry>玩家剩余可购买的挑战次数。</entry>
                                            </row>
                                            <row>
                                                <entry>passed_elitescene_ids</entry>
                                                <entry>Array(elitescene_id, ...)</entry>
                                                <entry>玩家已挑战胜利的精英副本ID列表。</entry>
                                            </row>
										</tbody>
									</tgroup>
								</informaltable>
							</entry>
						</row>
						<row>
							<entry>协议说明</entry>
							<entry namest="2" nameend="5"/>
						</row>
					</tbody>
				</tgroup>
			</informaltable>
		</para>
	</section>

	<section>
        <title>获取活动副本的基本信息</title>
		<para>
			<informaltable>
				<tgroup cols="5">
					<colspec colnum="1" colname="1"/>
					<colspec colnum="2" colname="2"/>
					<colspec colnum="3" colname="3"/>
					<colspec colnum="4" colname="4"/>
					<colspec colnum="5" colname="5"/>
					<tbody>
						<row>
							<entry>协议名称</entry>
							<entry namest="2" nameend="5">获取活动副本的基本信息</entry>
						</row>
						<row>
							<entry>呼叫方</entry>
							<entry>应答方</entry>
							<entry>函数名</entry>
							<entry>请求参数说明</entry>
							<entry>返回值格式说明</entry>
						</row>
						<row>
							<entry>客户端</entry>
							<entry>网关服务器</entry>
							<entry>activescene_data</entry>
							<entry>
								<informaltable>
									<tgroup cols="3">
										<colspec colnum="1" colname="1"/>
										<colspec colnum="2" colname="2"/>
										<colspec colnum="3" colname="3"/>
										<tbody>
											<row>
												<entry>参数</entry>
												<entry>类型</entry>
												<entry>说明</entry>
											</row>
										</tbody>
									</tgroup>
								</informaltable>
							</entry>
							<entry>
								<informaltable>
									<tgroup cols="3">
										<colspec colnum="1" colname="1"/>
										<colspec colnum="2" colname="2"/>
										<colspec colnum="3" colname="3"/>
										<tbody>
											<row>
												<entry>参数</entry>
												<entry>类型</entry>
												<entry>说明</entry>
											</row>
											<row>
												<entry>result</entry>
												<entry>uint</entry>
												<entry>状态。0：获取成功。其它见<link linkend="errorlist">错误代码列表</link>.</entry>
											</row>
											<row>
												<entry>data</entry>
												<entry>Array(Array(active_scene_id, fight_count, left_buy_fight_count), ...)</entry>
												<entry>玩家活动副本中的不同活动的信息。活动依次为。</entry>
											</row>
                                            <row>
                                                <entry>active_scene_id</entry>
                                                <entry>uint</entry>
                                                <entry>活动副本ID。</entry>
                                            </row>
                                            <row>
                                                <entry>fight_count</entry>
                                                <entry>uint</entry>
                                                <entry>玩家可挑战的次数。</entry>
                                            </row>
                                            <row>
                                                <entry>left_buy_fight_count</entry>
                                                <entry>uint</entry>
                                                <entry>玩家剩余可购买的挑战次数。</entry>
                                            </row>
										</tbody>
									</tgroup>
								</informaltable>
							</entry>
						</row>
						<row>
							<entry>协议说明</entry>
							<entry namest="2" nameend="5"/>
						</row>
					</tbody>
				</tgroup>
			</informaltable>
		</para>
	</section>

	<section>
        <title>副本购买挑战次数</title>
		<para>
			<informaltable>
				<tgroup cols="5">
					<colspec colnum="1" colname="1"/>
					<colspec colnum="2" colname="2"/>
					<colspec colnum="3" colname="3"/>
					<colspec colnum="4" colname="4"/>
					<colspec colnum="5" colname="5"/>
					<tbody>
						<row>
							<entry>协议名称</entry>
							<entry namest="2" nameend="5">精英副本、活动副本中的挑战次数用完时 可购买挑战次数</entry>
						</row>
						<row>
							<entry>呼叫方</entry>
							<entry>应答方</entry>
							<entry>函数名</entry>
							<entry>请求参数说明</entry>
							<entry>返回值格式说明</entry>
						</row>
						<row>
							<entry>客户端</entry>
							<entry>网关服务器</entry>
							<entry>buy_battle_count</entry>
							<entry>
								<informaltable>
									<tgroup cols="3">
										<colspec colnum="1" colname="1"/>
										<colspec colnum="2" colname="2"/>
										<colspec colnum="3" colname="3"/>
										<tbody>
											<row>
												<entry>参数</entry>
												<entry>类型</entry>
												<entry>说明</entry>
											</row>
                                            <row>
                                                <entry>scene_type</entry>
                                                <entry>uint</entry>
                                                <entry>2:精英副本; 4:活动副本之经验宝物; 5:活动副本之打土豪。</entry>
                                            </row>
										</tbody>
									</tgroup>
								</informaltable>
							</entry>
							<entry>
								<informaltable>
									<tgroup cols="3">
										<colspec colnum="1" colname="1"/>
										<colspec colnum="2" colname="2"/>
										<colspec colnum="3" colname="3"/>
										<tbody>
											<row>
												<entry>参数</entry>
												<entry>类型</entry>
												<entry>说明</entry>
											</row>
											<row>
												<entry>result</entry>
												<entry>uint</entry>
												<entry>状态。0：获取成功。其它见<link linkend="errorlist">错误代码列表</link>.</entry>
											</row>
                                            <row>
                                                <entry>data</entry>
                                                <entry>Array(count, left_buy_fight_count, credits)</entry>
                                                <entry>玩家购买后的信息。</entry>
                                            </row>
                                            <row>
                                                <entry>count</entry>
                                                <entry>uint</entry>
                                                <entry>玩家可挑战的次数。</entry>
                                            </row>
                                            <row>
                                                <entry>left_buy_fight_count</entry>
                                                <entry>uint</entry>
                                                <entry>玩家剩余可购买的挑战次数。</entry>
                                            </row>
                                            <row>
                                                <entry>credits</entry>
                                                <entry>uint</entry>
                                                <entry>玩家剩余的钻石数。</entry>
                                            </row>
										</tbody>
									</tgroup>
								</informaltable>
							</entry>
						</row>
						<row>
							<entry>协议说明</entry>
							<entry namest="2" nameend="5"/>
						</row>
					</tbody>
				</tgroup>
			</informaltable>
		</para>
	</section>

	<section>
		<title>战斗复活</title>
		<para>
			<informaltable>
				<tgroup cols="5">
					<colspec colnum="1" colname="1"/>
					<colspec colnum="2" colname="2"/>
					<colspec colnum="3" colname="3"/>
					<colspec colnum="4" colname="4"/>
					<colspec colnum="5" colname="5"/>
					<tbody>
						<row>
							<entry>协议名称</entry>
							<entry namest="2" nameend="5">战斗复活</entry>
						</row>
						<row>
							<entry>呼叫方</entry>
							<entry>应答方</entry>
							<entry>函数名</entry>
							<entry>请求参数说明</entry>
							<entry>返回值格式说明</entry>
						</row>
						<row>
							<entry>客户端</entry>
							<entry>网关服务器</entry>
							<entry>battle_fellow_revive</entry>
							<entry>
								<informaltable>
									<tgroup cols="3">
										<colspec colnum="1" colname="1"/>
										<colspec colnum="2" colname="2"/>
										<colspec colnum="3" colname="3"/>
										<tbody>
											<row>
												<entry>参数</entry>
												<entry>类型</entry>
												<entry>说明</entry>
											</row>
											<row>
												<entry>scene_type</entry>
												<entry>uint</entry>
												<entry>副本类型。2:精英副本; 3:活动副本之经验熊猫; 4:活动副本之经验宝物; </entry>
											</row>
										</tbody>
									</tgroup>
								</informaltable>
							</entry>
							<entry>
								<informaltable>
									<tgroup cols="3">
										<colspec colnum="1" colname="1"/>
										<colspec colnum="2" colname="2"/>
										<colspec colnum="3" colname="3"/>
										<tbody>
											<row>
												<entry>参数</entry>
												<entry>类型</entry>
												<entry>说明</entry>
											</row>
											<row>
												<entry>result</entry>
												<entry>uint</entry>
												<entry>状态。0：获取成功。其它见<link linkend="errorlist">错误代码列表</link>.</entry>
											</row>
											<row>
												<entry>golds</entry>
												<entry>uint</entry>
												<entry>玩家剩余的金币。</entry>
											</row>
										</tbody>
									</tgroup>
								</informaltable>
							</entry>
						</row>
						<row>
							<entry>协议说明</entry>
							<entry namest="2" nameend="5"/>
						</row>
					</tbody>
				</tgroup>
			</informaltable>
		</para>
	</section>

	<section>
		<title>同步玩家战力值</title>
		<para>
			<informaltable>
				<tgroup cols="5">
					<colspec colnum="1" colname="1"/>
					<colspec colnum="2" colname="2"/>
					<colspec colnum="3" colname="3"/>
					<colspec colnum="4" colname="4"/>
					<colspec colnum="5" colname="5"/>
					<tbody>
						<row>
							<entry>协议名称</entry>
							<entry namest="2" nameend="5">同步玩家的战力值</entry>
						</row>
						<row>
							<entry>呼叫方</entry>
							<entry>应答方</entry>
							<entry>函数名</entry>
							<entry>请求参数说明</entry>
							<entry>返回值格式说明</entry>
						</row>
						<row>
							<entry>客户端</entry>
							<entry>网关服务器</entry>
							<entry>update_might</entry>
							<entry>
								<informaltable>
									<tgroup cols="3">
										<colspec colnum="1" colname="1"/>
										<colspec colnum="2" colname="2"/>
										<colspec colnum="3" colname="3"/>
										<tbody>
											<row>
												<entry>参数</entry>
												<entry>类型</entry>
												<entry>说明</entry>
											</row>
											<row>
												<entry>might</entry>
												<entry>uint</entry>
												<entry>玩家当前的战力值。</entry>
											</row>
										</tbody>
									</tgroup>
								</informaltable>
							</entry>
							<entry>
								<informaltable>
									<tgroup cols="3">
										<colspec colnum="1" colname="1"/>
										<colspec colnum="2" colname="2"/>
										<colspec colnum="3" colname="3"/>
										<tbody>
											<row>
												<entry>参数</entry>
												<entry>类型</entry>
												<entry>说明</entry>
											</row>
											<row>
												<entry>result</entry>
												<entry>uint</entry>
												<entry>状态。0：获取成功。其它见<link linkend="errorlist">错误代码列表</link>.</entry>
											</row>
										</tbody>
									</tgroup>
								</informaltable>
							</entry>
						</row>
						<row>
							<entry>协议说明</entry>
							<entry namest="2" nameend="5"/>
						</row>
					</tbody>
				</tgroup>
			</informaltable>
		</para>
	</section>

	<section>
		<title>[old] 副本全扫荡</title>
		<para>
			<informaltable>
				<tgroup cols="5">
					<colspec colnum="1" colname="1"/>
					<colspec colnum="2" colname="2"/>
					<colspec colnum="3" colname="3"/>
					<colspec colnum="4" colname="4"/>
					<colspec colnum="5" colname="5"/>
					<tbody>
						<row>
							<entry>协议名称</entry>
							<entry namest="2" nameend="5">针对某个副本的所有怪物组的困难难度进行一次性扫荡, 并获得胜利。低于v0.3.5.2版本使用。</entry>
						</row>
						<row>
							<entry>呼叫方</entry>
							<entry>应答方</entry>
							<entry>函数名</entry>
							<entry>请求参数说明</entry>
							<entry>返回值格式说明</entry>
						</row>
						<row>
							<entry>客户端</entry>
							<entry>网关服务器</entry>
							<entry>battle_scene_sweep</entry>
							<entry>
								<informaltable>
									<tgroup cols="3">
										<colspec colnum="1" colname="1"/>
										<colspec colnum="2" colname="2"/>
										<colspec colnum="3" colname="3"/>
										<tbody>
											<row>
												<entry>参数</entry>
												<entry>类型</entry>
												<entry>说明</entry>
											</row>
											<row>
												<entry>scene_id</entry>
												<entry>uint</entry>
												<entry>副本ID。</entry>
											</row>
										</tbody>
									</tgroup>
								</informaltable>
							</entry>
							<entry>
								<informaltable>
									<tgroup cols="3">
										<colspec colnum="1" colname="1"/>
										<colspec colnum="2" colname="2"/>
										<colspec colnum="3" colname="3"/>
										<tbody>
											<row>
												<entry>参数</entry>
												<entry>类型</entry>
												<entry>说明</entry>
											</row>
											<row>
												<entry>result</entry>
												<entry>uint</entry>
												<entry>状态。0：获取成功。其它见<link linkend="errorlist">错误代码列表</link>.</entry>
											</row>
											<row>
												<entry>data</entry>
												<entry>Array(dungeon_info, dungeon_award, left_credits, left_energy)</entry>
												<entry>连续战斗结束后的副本信息及掉落详情, 不用更新连战冷却时间。详细参数如下: </entry>
											</row>
											<row>
												<entry>dungeon_info</entry>
												<entry>Array(Array(dungeon_id, dungeon_today_challenge), ...)</entry>
												<entry>该副本所有的怪物组信息. dungeon_id: uint. 怪物组ID. dungeon_today_challenge: uint. 今日已挑战次数.</entry>
											</row>
											<row>
												<entry>dungeon_award</entry>
												<entry>Array(add_gold, add_soul, add_exp)</entry>
												<entry>副本全扫荡结束后的奖励。add_gold: uint. 获得的金币. add_soul: uint. 获得的仙魂. add_exp: uint. 获得的经验. </entry>
											</row>
											<row>
												<entry>left_credits</entry>
												<entry>uint</entry>
												<entry>玩家剩余的钻石数。</entry>
											</row>
											<row>
												<entry>left_energy</entry>
												<entry>uint</entry>
												<entry>玩家剩余的精力值。</entry>
											</row>
										</tbody>
									</tgroup>
								</informaltable>
							</entry>
						</row>
						<row>
							<entry>协议说明</entry>
							<entry namest="2" nameend="5"/>
						</row>
					</tbody>
				</tgroup>
			</informaltable>
		</para>
	</section>

	<section>
		<title>[new] 副本全扫荡</title>
		<para>
			<informaltable>
				<tgroup cols="5">
					<colspec colnum="1" colname="1"/>
					<colspec colnum="2" colname="2"/>
					<colspec colnum="3" colname="3"/>
					<colspec colnum="4" colname="4"/>
					<colspec colnum="5" colname="5"/>
					<tbody>
						<row>
							<entry>协议名称</entry>
							<entry namest="2" nameend="5">针对某个副本的所有怪物组的困难难度进行一次性扫荡, 并获得胜利, 新增可使用道具。高于v0.3.5.2版本使用</entry>
						</row>
						<row>
							<entry>呼叫方</entry>
							<entry>应答方</entry>
							<entry>函数名</entry>
							<entry>请求参数说明</entry>
							<entry>返回值格式说明</entry>
						</row>
						<row>
							<entry>客户端</entry>
							<entry>网关服务器</entry>
							<entry>battle_scene_sweep_new</entry>
							<entry>
								<informaltable>
									<tgroup cols="3">
										<colspec colnum="1" colname="1"/>
										<colspec colnum="2" colname="2"/>
										<colspec colnum="3" colname="3"/>
										<tbody>
											<row>
												<entry>参数</entry>
												<entry>类型</entry>
												<entry>说明</entry>
											</row>
											<row>
												<entry>scene_id</entry>
												<entry>uint</entry>
												<entry>副本ID。</entry>
											</row>
											<row>
												<entry>sweep_type</entry>
												<entry>uint</entry>
												<entry>扫荡方式。1:使用道具; 2:使用点卷; </entry>
											</row>
										</tbody>
									</tgroup>
								</informaltable>
							</entry>
							<entry>
								<informaltable>
									<tgroup cols="3">
										<colspec colnum="1" colname="1"/>
										<colspec colnum="2" colname="2"/>
										<colspec colnum="3" colname="3"/>
										<tbody>
											<row>
												<entry>参数</entry>
												<entry>类型</entry>
												<entry>说明</entry>
											</row>
											<row>
												<entry>result</entry>
												<entry>uint</entry>
												<entry>状态。0：获取成功。其它见<link linkend="errorlist">错误代码列表</link>.</entry>
											</row>
											<row>
												<entry>data</entry>
												<entry>Array(dungeon_info, dungeon_award, left_credits, left_energy, left_items)</entry>
												<entry>连续战斗结束后的副本信息及掉落详情, 不用更新连战冷却时间。详细参数如下: </entry>
											</row>
											<row>
												<entry>dungeon_info</entry>
												<entry>Array(Array(dungeon_id, dungeon_today_challenge), ...)</entry>
												<entry>该副本所有的怪物组信息. dungeon_id: uint. 怪物组ID. dungeon_today_challenge: uint. 今日已挑战次数.</entry>
											</row>
											<row>
												<entry>dungeon_award</entry>
												<entry>Array(add_gold, add_soul, add_exp)</entry>
												<entry>副本全扫荡结束后的奖励。add_gold: uint. 获得的金币. add_soul: uint. 获得的仙魂. add_exp: uint. 获得的经验. </entry>
											</row>
											<row>
												<entry>left_credits</entry>
												<entry>uint</entry>
												<entry>玩家剩余的钻石数。</entry>
											</row>
											<row>
												<entry>left_energy</entry>
												<entry>uint</entry>
												<entry>玩家剩余的精力值。</entry>
											</row>
                                            <row>
                                                <entry>left_items</entry>
                                                <entry>Array(Array(user_item_id, item_type, item_id, quatity), ...)</entry>
                                                <entry>使用道具后玩家的道具信息。</entry>
                                            </row>
										</tbody>
									</tgroup>
								</informaltable>
							</entry>
						</row>
						<row>
							<entry>协议说明</entry>
							<entry namest="2" nameend="5"/>
						</row>
					</tbody>
				</tgroup>
			</informaltable>
		</para>
	</section>

    <section>
        <title>获取剧情副本排行榜</title>
        <para>
            <informaltable>
                <tgroup cols="5">
                	<colspec colnum="1" colname="1"/>
                	<colspec colnum="2" colname="2"/>
                	<colspec colnum="3" colname="3"/>
                	<colspec colnum="4" colname="4"/>
                	<colspec colnum="5" colname="5"/>
                	<tbody>
                		<row>
                			<entry>协议名称</entry>
                			<entry namest="2" nameend="5">获取剧情副本排行榜, 最多10名玩家</entry>
                		</row>
                		<row>
                			<entry>呼叫方</entry>
                			<entry>应答方</entry>
                			<entry>函数名</entry>
                			<entry>请求参数说明</entry>
                			<entry>返回值格式说明</entry>
                		</row>
                		<row>
                			<entry>客户端</entry>
                			<entry>网关服务器</entry>
                			<entry>get_scene_ranklist</entry>
                			<entry>
                				<informaltable>
                					<tgroup cols="3">
                						<colspec colnum="1" colname="1"/>
                						<colspec colnum="2" colname="2"/>
                						<colspec colnum="3" colname="3"/>
                						<tbody>
                							<row>
                								<entry>参数</entry>
                								<entry>类型</entry>
                								<entry>说明</entry>
                							</row>
                						</tbody>
                					</tgroup>
                				</informaltable>
                			</entry>
                			<entry>
                				<informaltable>
                					<tgroup cols="3">
                						<colspec colnum="1" colname="1"/>
                						<colspec colnum="2" colname="2"/>
                						<colspec colnum="3" colname="3"/>
                						<tbody>
                							<row>
                								<entry>参数</entry>
                								<entry>类型</entry>
                								<entry>说明</entry>
                							</row>
                							<row>
                								<entry>result</entry>
                								<entry>uint</entry>
                								<entry>状态。0：获取成功。其它见<link linkend="errorlist">错误代码列表</link>.</entry>
                							</row>
                							<row>
                								<entry>data</entry>
                								<entry>Array(star_count, rank, Array(Array(cid, lead_id, level, nick_name, might, scene_id, star_count, rank), ...))</entry>
                								<entry>剧情副本中的排行榜，长度最大为10，具体参数值如下：</entry>
                							</row>
                                            <row>
                                                <entry>star_count</entry>
                                                <entry>uint.</entry>
                                                <entry>本人当前的副本进度。</entry>
                                            </row>
                                            <row>
                                                <entry>rank</entry>
                                                <entry>uint.</entry>
                                                <entry>本人当前的排名。</entry>
                                            </row>
                                            <row>
                                                <entry>cid</entry>
                                                <entry>uint.</entry>
                                                <entry>玩家的ID。</entry>
                                            </row>
                                            <row>
                                                <entry>lead_id</entry>
                                                <entry>uint.</entry>
                                                <entry>玩家的主角ID。</entry>
                                            </row>
                                            <row>
                                                <entry>level</entry>
                                                <entry>uint.</entry>
                                                <entry>玩家的等级。</entry>
                                            </row>
                                            <row>
                                                <entry>nick_name</entry>
                                                <entry>string.</entry>
                                                <entry>玩家的名字。</entry>
                                            </row>
                                            <row>
                                                <entry>might</entry>
                                                <entry>uint.</entry>
                                                <entry>玩家的战力值。</entry>
                                            </row>
											<row>
												<entry>scene_id</entry>
												<entry>uint</entry>
												<entry>玩家可挑战的最大副本ID。client通过scene_id获取副本名称等信息。</entry>
											</row>
                                            <row>
                                                <entry>star_count</entry>
                                                <entry>uint.</entry>
                                                <entry>玩家的副本进度。</entry>
                                            </row>
                                            <row>
                                                <entry>rank</entry>
                                                <entry>uint。</entry>
                                                <entry>玩家在剧情副本中的排名。</entry>
                                            </row>
                						</tbody>
                					</tgroup>
                				</informaltable>
                			</entry>
                		</row>
                		<row>
                			<entry>协议说明</entry>
                			<entry namest="2" nameend="5"/>
                		</row>
                	</tbody>
                </tgroup>
            </informaltable>
        </para>
    </section>

	<section>
		<title>剧情副本  重置怪物组挑战次数</title>
		<para>
			<informaltable>
				<tgroup cols="5">
					<colspec colnum="1" colname="1"/>
					<colspec colnum="2" colname="2"/>
					<colspec colnum="3" colname="3"/>
					<colspec colnum="4" colname="4"/>
					<colspec colnum="5" colname="5"/>
					<tbody>
						<row>
							<entry>协议名称</entry>
							<entry namest="2" nameend="5">剧情副本  重置怪物组挑战次数</entry>
						</row>
						<row>
							<entry>呼叫方</entry>
							<entry>应答方</entry>
							<entry>函数名</entry>
							<entry>请求参数说明</entry>
							<entry>返回值格式说明</entry>
						</row>
						<row>
							<entry>客户端</entry>
							<entry>网关服务器</entry>
							<entry>reset_monster_count</entry>
							<entry>
								<informaltable>
									<tgroup cols="3">
										<colspec colnum="1" colname="1"/>
										<colspec colnum="2" colname="2"/>
										<colspec colnum="3" colname="3"/>
										<tbody>
											<row>
												<entry>参数</entry>
												<entry>类型</entry>
												<entry>说明</entry>
											</row>
											<row>
												<entry>scene_id</entry>
												<entry>uint</entry>
												<entry>副本ID</entry>
											</row>
											<row>
												<entry>dungeon_id</entry>
												<entry>uint</entry>
												<entry>怪物组ID.</entry>
											</row>
											<row>
												<entry>type</entry>
												<entry>uint</entry>
												<entry>重置方式。1:使用道具; 2:使用点卷; </entry>
											</row>
										</tbody>
									</tgroup>
								</informaltable>
							</entry>
							<entry>
								<informaltable>
									<tgroup cols="3">
										<colspec colnum="1" colname="1"/>
										<colspec colnum="2" colname="2"/>
										<colspec colnum="3" colname="3"/>
										<tbody>
											<row>
												<entry>参数</entry>
												<entry>类型</entry>
												<entry>说明</entry>
											</row>
											<row>
												<entry>result</entry>
												<entry>uint</entry>
												<entry>状态。0：获取成功。其它见<link linkend="errorlist">错误代码列表</link>.</entry>
											</row>
											<row>
												<entry>data</entry>
												<entry>Array(credits, left_items)</entry>
												<entry>，具体参数值如下：</entry>
											</row>
											<row>
												<entry>credits</entry>
												<entry>uint</entry>
												<entry>玩家当前剩余点卷数。</entry>
											</row>
                                            <row>
                                                <entry>left_items</entry>
                                                <entry>Array(Array(user_item_id, item_type, item_id, quatity), ...)</entry>
                                                <entry>使用道具后玩家的道具信息。</entry>
                                            </row>
                                            <row>
                                                <entry>user_item_id</entry>
                                                <entry>uint</entry>
                                                <entry>玩家道具ID。</entry>
                                            </row>
                                            <row>
                                                <entry>item_type</entry>
                                                <entry>uint</entry>
                                                <entry>道具类型。</entry>
                                            </row>
                                            <row>
                                                <entry>item_id</entry>
                                                <entry>uint</entry>
                                                <entry>道具ID。</entry>
                                            </row>
                                            <row>
                                                <entry>quantity</entry>
                                                <entry>uint</entry>
                                                <entry>道具剩余的数量。为0时需要client从背包中删除此道具</entry>
                                            </row>
										</tbody>
									</tgroup>
								</informaltable>
							</entry>
						</row>
						<row>
							<entry>协议说明</entry>
							<entry namest="2" nameend="5"/>
						</row>
					</tbody>
				</tgroup>
			</informaltable>
		</para>
	</section>

	<section>
        <title>领取副本中 怪物组的宝箱奖励</title>
        <para>
            <informaltable>
                <tgroup cols="5">
					<colspec colnum="1" colname="1"/>
					<colspec colnum="2" colname="2"/>
					<colspec colnum="3" colname="3"/>
					<colspec colnum="4" colname="4"/>
					<colspec colnum="5" colname="5"/>
					<tbody>
						<row>
							<entry>协议名称</entry>
							<entry namest="2" nameend="5">领取副本中 怪物组的宝箱奖励</entry>
						</row>
						<row>
							<entry>呼叫方</entry>
							<entry>应答方</entry>
							<entry>函数名</entry>
							<entry>请求参数说明</entry>
							<entry>返回值格式说明</entry>
						</row>
						<row>
							<entry>客户端</entry>
							<entry>网关服务器</entry>
							<entry>get_dungeon_reward</entry>
							<entry>
								<informaltable>
									<tgroup cols="3">
										<colspec colnum="1" colname="1"/>
										<colspec colnum="2" colname="2"/>
										<colspec colnum="3" colname="3"/>
										<tbody>
											<row>
												<entry>参数</entry>
												<entry>类型</entry>
												<entry>说明</entry>
											</row>
											<row>
												<entry>scene_id</entry>
												<entry>uint</entry>
												<entry>副本ID</entry>
											</row>
											<row>
												<entry>dungeon_id</entry>
												<entry>uint</entry>
												<entry>怪物组ID.</entry>
											</row>
										</tbody>
									</tgroup>
								</informaltable>
							</entry>
							<entry>
								<informaltable>
									<tgroup cols="3">
										<colspec colnum="1" colname="1"/>
										<colspec colnum="2" colname="2"/>
										<colspec colnum="3" colname="3"/>
										<tbody>
											<row>
												<entry>参数</entry>
												<entry>类型</entry>
												<entry>说明</entry>
											</row>
											<row>
												<entry>result</entry>
												<entry>uint</entry>
												<entry>状态。0：获取成功。其它见<link linkend="errorlist">错误代码列表</link>.</entry>
											</row>
											<row>
												<entry>data</entry>
												<entry>Array( Array(user_item_id, item_type, item_id, quantity), ... )</entry>
												<entry>星数奖励. 详细参数如下：</entry>
											</row>
											<row>
												<entry>user_item_id</entry>
												<entry>uint</entry>
												<entry>玩家道具ID。item_type=1时user_item_id为0。</entry>
											</row>
											<row>
												<entry>item_type</entry>
												<entry>uint</entry>
												<entry>奖励的道具类型, 含金币、仙魂</entry>
											</row>
											<row>
												<entry>item_id</entry>
												<entry>uint</entry>
												<entry>奖励的道具ID</entry>
											</row>
											<row>
												<entry>quantity</entry>
												<entry>uint</entry>
												<entry>奖励的道具数量</entry>
											</row>
										</tbody>
									</tgroup>
								</informaltable>
							</entry>
						</row>
						<row>
							<entry>协议说明</entry>
							<entry namest="2" nameend="5"/>
						</row>
					</tbody>
				</tgroup>
			</informaltable>
		</para>
	</section>

</chapter>
